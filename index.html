<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>South Traders</title>
  
  <!-- Material Design CSS -->
  <link href="https://unpkg.com/material-components-web@14.0.0/dist/material-components-web.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root { 
      font-family: 'Roboto', system-ui, -apple-system, Segoe UI, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif; 
      color-scheme: dark; 
      --mdc-theme-primary: #4CAF50;
      --mdc-theme-secondary: #2a2a33;
      --mdc-theme-surface: #1e1e24;
      --mdc-theme-background: #0f0f10;
      --mdc-theme-on-primary: #ffffff;
      --mdc-theme-on-secondary: #ffffff;
      --mdc-theme-on-surface: #f1f1f1;
      --mdc-theme-on-background: #f1f1f1;
    }
    
    /* Material Design custom overrides for better visibility */
    .mdc-tab {
      color: #d0d0d0 !important; /* Color mÃ¡s claro para tabs no seleccionados */
      background-color: #1b1b1f !important;
      border-radius: 6px 6px 0 0 !important;
      border: 1px solid #2a2a2a !important;
      border-bottom: none !important;
      margin-right: 4px !important;
    }

    .mdc-tab--active {
      color: #ffffff !important; /* Color para tab seleccionado */
      background-color: #23232a !important;
      font-weight: 600 !important;
    }

    .mdc-tab:hover:not(.mdc-tab--active) {
      color: #e8e8e8 !important; /* Color en hover para mejor visibilidad */
      background-color: #2a2a2f !important;
    }

    .mdc-tab-indicator__content--underline {
      border-color: #4CAF50 !important;
      border-width: 3px !important;
    }
    
    /* Fix for all text elements that might appear black */
    .mdc-tab__text-label,
    .mdc-button__label,
    .mdc-floating-label,
    .mdc-text-field__input,
    .mdc-form-field > label,
    .mdc-checkbox ~ label,
    span, p, div, h1, h2, h3, h4, h5, h6 {
      color: inherit !important;
    }
    
    /* Specific overrides for Material components */
    .mdc-tab__text-label {
      color: inherit !important;
    }
    
    .mdc-button__label {
      color: inherit !important;
    }
    
    /* Text field improvements */
    .mdc-text-field--outlined {
      background-color: #1b1b1f !important;
      box-shadow: none !important; /* Eliminar cualquier sombra por defecto */
    }
    
    .mdc-text-field--outlined .mdc-notched-outline__leading,
    .mdc-text-field--outlined .mdc-notched-outline__notch,
    .mdc-text-field--outlined .mdc-notched-outline__trailing {
      border-color: #3a3a44 !important;
    }
    
    .mdc-text-field--outlined:not(.mdc-text-field--disabled):hover .mdc-notched-outline__leading,
    .mdc-text-field--outlined:not(.mdc-text-field--disabled):hover .mdc-notched-outline__notch,
    .mdc-text-field--outlined:not(.mdc-text-field--disabled):hover .mdc-notched-outline__trailing {
      border-color: #4CAF50 !important;
    }
    
    .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__leading,
    .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__notch,
    .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__trailing {
      border-color: #4CAF50 !important;
      border-width: 2px !important;
    }
    
    .mdc-text-field__input {
      color: #f1f1f1 !important;
    }
    
    .mdc-floating-label {
      color: #d0d0d0 !important; /* Gris mÃ¡s claro */
    }
    
    .mdc-text-field--focused .mdc-floating-label {
      color: #4CAF50 !important;
    }
    
    /* Button improvements */
    .mdc-button {
      color: #f1f1f1 !important;
    }
    
    .mdc-button--raised {
      background-color: #4CAF50 !important;
      color: #ffffff !important;
    }
    
    .mdc-button--outlined {
      border-color: #3a3a44 !important;
      color: #f1f1f1 !important;
    }
    
    .mdc-button--outlined:hover {
      background-color: #2a2a33 !important;
      border-color: #4CAF50 !important;
    }
    
    /* Checkbox improvements */
    .mdc-checkbox__native-control:enabled:checked ~ .mdc-checkbox__background {
      background-color: #4CAF50 !important;
      border-color: #4CAF50 !important;
    }
    
    .mdc-checkbox__background {
      border-color: #3a3a44 !important;
    }
    
    .mdc-form-field > label {
      color: #f1f1f1 !important;
    }
    
    /* General text color fixes */
    .status {
      color: #d0d0d0 !important;
    }
    
    /* Toolbar spacing fix */
    .toolbar {
      align-items: center !important;
      gap: 12px !important;
    }
    
    /* Search field specific styling - match button size */
    .toolbar .search-field {
      width: 160px !important; /* Ancho similar a botones */
      height: 36px !important; /* Misma altura que botones MDC */
      box-shadow: none !important; /* Eliminar sombra */
      background: transparent !important; /* Fondo transparente */
      margin: 0 !important; /* Eliminar mÃ¡rgenes extra */
      align-self: center !important; /* Centrar verticalmente */
    }

    .toolbar .search-field .mdc-text-field__input {
      height: 34px !important; /* Ajustar altura del input para coincidir */
      padding-top: 8px !important;
      padding-bottom: 8px !important;
      box-shadow: none !important; /* Eliminar sombra del input */
      background: transparent !important; /* Fondo transparente */
      line-height: 18px !important; /* Centrar texto verticalmente */
    }

    .toolbar .search-field .mdc-notched-outline__leading,
    .toolbar .search-field .mdc-notched-outline__notch,
    .toolbar .search-field .mdc-notched-outline__trailing {
      height: 36px !important; /* Misma altura que el contenedor */
      box-shadow: none !important; /* Eliminar sombra del borde */
    }
    
    .toolbar .search-field .mdc-floating-label {
      top: 50% !important;
      transform: translateY(-50%) !important;
    }
    
    .toolbar .search-field .mdc-floating-label--float-above {
      transform: translateY(-106%) scale(0.75) !important;
    }
    
    /* Remove any elevation/shadow from text field */
    .toolbar .search-field::before,
    .toolbar .search-field::after {
      display: none !important;
    }
    
    .toolbar .search-field .mdc-text-field__ripple {
      display: none !important;
    }
    
    /* Additional shadow removal for all Material Design states */
    .toolbar .search-field,
    .toolbar .search-field.mdc-text-field--focused,
    .toolbar .search-field.mdc-text-field--outlined,
    .toolbar .search-field.mdc-text-field--outlined.mdc-text-field--focused {
      box-shadow: none !important;
      -webkit-box-shadow: none !important;
      -moz-box-shadow: none !important;
      background: #1b1b1f !important; /* Fondo sÃ³lido en lugar de transparente */
    }
    
    /* Prevent any black text */
    * {
      color: inherit;
    }
    
    /* Ensure all Material Design components inherit proper colors */
    .mdc-tab *, 
    .mdc-button *, 
    .mdc-text-field *, 
    .mdc-checkbox *,
    .mdc-form-field * {
      color: inherit !important;
    }
    
    body { margin: 0; padding: 0; background: #0f0f10; color: #f1f1f1; width: 100%; max-width: 100%; overflow-x: hidden; }
    header { padding: 16px; border-bottom: 1px solid #2a2a2a; background: #121214; display: flex; align-items: center; justify-content: center; gap: 12px; position: relative; }
    .header-logo { height: auto; max-width: 150px; width: 100%; object-fit: contain; position: absolute; left: 16px; }
    h1 { margin: 0; font-size: 20px; color: #fafafa; }
    .container { padding: 16px; width: 100%; box-sizing: border-box; }
    .tabs { display: flex; gap: 8px; border-bottom: 1px solid #2a2a2a; margin-bottom: 12px; }
    .tab { padding: 8px 12px; cursor: pointer; border: 1px solid #2a2a2a; border-bottom: none; border-radius: 6px 6px 0 0; background: #1b1b1f; color: #e6e6e6; }
    .tab.active { background: #23232a; font-weight: 600; color: #ffffff; }
    .toolbar { display: flex; gap: 8px; align-items: center; margin-bottom: 12px; position: relative; flex-wrap: wrap; width: 100%; box-sizing: border-box; }
    .toolbar button { padding: 6px 10px; cursor: pointer; background: #2a2a33; color: #f0f0f0; border: 1px solid #3a3a44; border-radius: 4px; }
    .status { font-size: 12px; color: #b5b5b5; }
    table { width: 100%; border-collapse: collapse; color: #f0f0f0; table-layout: fixed; }
    th, td { padding: 8px; border-bottom: 1px solid #2a2a2a; text-align: left; }
    th { background: #1e1e24; position: sticky; top: 0; color: #ffffff; }
    .right { text-align: center; }
    .error { color: #ff6b6b; font-size: 13px; }
    .hidden { display: none; }
    tr:nth-child(even) td { background: #15151a; }
    tr:nth-child(odd) td { background: #101015; }
    .zero-value {
      color: #ff6b6b !important;
      font-weight: 500;
    }
    th.sortable {
      cursor: pointer;
      user-select: none;
    }
    th.sortable:hover {
      background-color: #2a2a33;
    }
    th.sorted {
      background-color: #3a3a44;
      font-weight: 600;
      color: #4a9eff;
    }
    .toolbar input[type="text"] {
      padding: 6px 10px;
      border: 1px solid #3a3a44;
      border-radius: 4px;
      background: #1b1b1f;
      color: #f0f0f0;
    }
    .version-btn {
      background: #2a2a33;
      color: #f1f1f1;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      border: 1px solid #3a3a44;
      transition: background-color 0.2s;
      position: absolute;
      right: 16px;
    }
    .version-btn:hover {
      background: #3a3a44;
    }
    #loginBtn {
      background-color: #4CAF50; /* Green */
      color: white;
      border-radius: 4px;
      padding: 6px 10px;
    }
    #loginBtn:hover {
      background-color: #45a049;
    }
    #exportBtn {
      background-color: #4CAF50; /* Green */
      color: white;
      border: 1px solid #4CAF50;
    }
    #exportBtn:hover {
      background-color: #45a049;
    }
    .buy-input {
      width: 50px;
      max-width: 50px;
      text-align: center;
      padding: 4px 2px;
    }
    #columnFilterDropdown {
      background-color: #1b1b1f;
      border: 1px solid #2a2a2a;
      padding: 10px;
      z-index: 100;
      margin-top: 8px; /* Added to position below the button */
      display: none;
      flex-direction: column;
      gap: 5px;
      border-radius: 4px;
    }
    #columnFilterDropdown:not(.hidden) {
      display: flex;
    }
    #columnFilterDropdown label {
      color: #f0f0f0;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    #columnFilterDropdown input[type="checkbox"] {
      accent-color: #2a2a33;
    }
    .header-stats {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .header-stat-card {
      text-align: center;
      padding: 6px 12px;
      background: #15151a;
      border-radius: 6px;
      border: 1px solid #2a2a2a;
      min-width: 100px;
    }

    .header-stat-number {
      font-size: 1.2em;
      font-weight: bold;
      color: #4CAF50;
      margin-bottom: 2px;
    }

    .header-stat-label {
      font-size: 0.7em;
      color: #b5b5b5;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      white-space: nowrap;
    }

    .stats-container {
      display: none !important;
    }
    .stat-card {
      text-align: center;
      padding: 12px;
      background: #15151a;
      border-radius: 6px;
      border: 1px solid #2a2a2a;
    }
    .stat-number {
      font-size: 1.5em;
      font-weight: bold;
      color: #4CAF50;
      margin-bottom: 4px;
    }
    .stat-label {
      font-size: 0.85em;
      color: #b5b5b5;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .modal {
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
      display: none; /* Changed from flex to none */
      align-items: center;
      justify-content: center;
    }
    .modal:not(.hidden) {
      display: flex;
    }
    .modal-content {
      background-color: #1e1e24;
      margin: auto;
      padding: 20px;
      border: 1px solid #2a2a2a;
      width: 80%;
      max-width: 500px;
      border-radius: 8px;
      position: relative;
      color: #f1f1f1;
    }
    .close-button {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      position: absolute;
      top: 10px;
      right: 20px;
      cursor: pointer;
    }
    .close-button:hover,
    .close-button:focus {
      color: #f1f1f1;
      text-decoration: none;
      cursor: pointer;
    }
    #modalSummaryContent {
      margin-top: 20px;
      white-space: pre-wrap; /* Preserve newlines */
      font-family: monospace;
    }
    .version-section {
      margin-bottom: 24px;
      padding: 16px;
      background: #15151a;
      border-radius: 8px;
      border: 1px solid #2a2a2a;
    }
    .version-section h3 {
      margin: 0 0 12px 0;
      color: #4CAF50;
      font-size: 16px;
      border-bottom: 1px solid #2a2a2a;
      padding-bottom: 8px;
    }
    .version-section ul {
      margin: 0;
      padding-left: 20px;
      color: #e6e6e6;
    }
    .version-section li {
      margin-bottom: 8px;
      line-height: 1.4;
    }
    #changelogContent {
      max-height: 60vh;
      overflow-y: auto;
      margin-top: 16px;
    }
    .modal-total {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2em;
      text-align: right;
    }

    /* Mobile KPIs container */
    .mobile-kpis {
      display: none;
    }

    /* Mobile Menu Styles */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
      background: #2a2a33;
      border: 1px solid #3a3a44;
      border-radius: 4px;
      padding: 8px;
      cursor: pointer;
      color: #f1f1f1;
    }

    .mobile-menu-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1002;
    }

    .mobile-menu-overlay.active {
      display: block;
    }

    .mobile-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: 80%;
      max-width: 300px;
      height: 100%;
      background: #1e1e24;
      z-index: 1003;
      transition: right 0.3s ease;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.3);
    }

    .mobile-menu.active {
      right: 0;
    }

    .mobile-menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 20px 15px 20px;
      border-bottom: 1px solid #2a2a2a;
      flex-shrink: 0;
    }

    .mobile-menu-header h3 {
      margin: 0;
      color: #4CAF50;
      font-size: 18px;
    }

    .mobile-menu-close {
      background: none;
      border: none;
      color: #f1f1f1;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mobile-menu-content {
      display: flex;
      flex-direction: column;
      gap: 4px;
      flex: 1;
      overflow-y: auto;
      padding: 15px 20px 15px 20px;
    }

    .mobile-menu-content .mdc-button,
    .mobile-menu-content .mdc-text-field,
    .mobile-menu-content .mdc-form-field {
      width: 100% !important;
    }

    .mobile-menu-content .mdc-button {
      min-height: 36px !important;
      padding: 6px 12px !important;
      font-size: 13px !important;
    }

    .mobile-menu-content .mdc-button .material-icons {
      font-size: 18px !important;
    }

    .mobile-menu-content .mdc-text-field {
      margin-bottom: 0 !important;
      height: 36px !important;
    }

    .mobile-menu-content .mdc-text-field__input {
      font-size: 13px !important;
      padding: 6px 12px !important;
    }

    .mobile-menu-content .mdc-floating-label {
      font-size: 13px !important;
    }

    .mobile-menu-content .mdc-form-field {
      margin: 0 !important;
      padding: 6px 0 !important;
      font-size: 13px !important;
    }

    .mobile-menu-content .mdc-form-field label {
      font-size: 13px !important;
    }

    /* Make all menu items consistent except login */
    .mobile-menu-content > *:not(:first-child):not(.menu-separator) {
      background-color: #2a2a33 !important;
      border: 1px solid #3a3a44 !important;
    }

    .mobile-menu-content .mdc-button--outlined:not(.mdc-button--raised) {
      background-color: #2a2a33 !important;
      border-color: #3a3a44 !important;
      color: #f1f1f1 !important;
    }

    .mobile-menu-separator {
      border-top: 1px solid #2a2a2a;
      margin: 6px 0;
    }

    .mobile-menu-version {
      flex-shrink: 0;
      padding: 12px 20px;
      background: #15151a;
      border-top: 1px solid #2a2a2a;
      text-align: center;
      font-size: 12px;
      color: #b5b5b5;
    }

    .mobile-menu-version button {
      background: #2a2a33;
      color: #f1f1f1;
      padding: 4px 12px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      border: 1px solid #3a3a44;
      transition: background-color 0.2s;
    }

    .mobile-menu-version button:hover {
      background: #3a3a44;
    }

    /* Logistics Modal Styles */
    .logistics-content {
      max-height: 70vh;
      overflow-y: auto;
    }

    .logistics-section {
      margin-bottom: 24px;
      padding: 16px;
      background: #15151a;
      border-radius: 8px;
      border: 1px solid #2a2a2a;
    }

    .logistics-section h4 {
      margin: 0 0 12px 0;
      color: #4CAF50;
      font-size: 16px;
      border-bottom: 1px solid #2a2a2a;
      padding-bottom: 8px;
    }

    .logistics-orders {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .no-orders {
      color: #b5b5b5;
      font-style: italic;
      text-align: center;
      padding: 20px;
      margin: 0;
    }

    .order-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #2a2a33;
      padding: 12px;
      border-radius: 6px;
      border-left: 4px solid #4CAF50;
    }

    .order-info {
      flex: 1;
    }

    .order-number {
      font-weight: 600;
      color: #4CAF50;
      margin-bottom: 4px;
    }

    .order-details {
      font-size: 12px;
      color: #b5b5b5;
    }

    .move-order-btn {
      background: #4CAF50;
      border: none;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      transition: all 0.2s ease;
      margin-left: 12px;
    }

    .move-order-btn:hover {
      background: #45a049;
      transform: translateY(2px);
    }

    .move-order-btn:disabled {
      background: #3a3a44;
      cursor: not-allowed;
      transform: none;
    }

    @media (max-width: 768px) {
      body {
        font-size: 14px;
      }
      h1 {
        font-size: 18px;
      }
      .container {
        padding: 8px;
      }
      .header {
        padding: 12px;
      }
      .tab {
        padding: 6px 8px;
      }
      .toolbar {
        display: none !important;
      }

      .mobile-menu-btn {
        display: flex !important;
        align-items: center;
        justify-content: center;
      }

      .mdc-tab-bar {
        display: none !important;
      }

      .version-btn {
        display: none !important;
      }

      .header-stats {
        display: none !important;
      }

      .mobile-kpis {
        display: none !important;
      }
      th, td {
        padding: 4px;
        font-size: 12px;
      }

      /* Tabs verticales en mÃ³viles */
      .mdc-tab-bar {
        max-width: 200px !important;
      }

      .mdc-tab-scroller__scroll-area {
        overflow-x: hidden !important;
      }

      .mdc-tab-scroller__scroll-content {
        display: flex !important;
        flex-direction: column !important;
        gap: 8px !important;
        align-items: flex-start !important;
      }

      .mdc-tab {
        border-radius: 6px !important;
        margin-right: 0 !important;
        width: 200px !important;
        min-width: 200px !important;
        justify-content: flex-start !important;
        text-align: left !important;
        border-bottom: 1px solid #2a2a2a !important;
      }

      .mdc-tab__content {
        justify-content: flex-start !important;
      }

      .mdc-tab-indicator__content--underline {
        border-left-width: 3px !important;
        border-bottom-width: 0 !important;
      }

      .mdc-tab-indicator {
        height: 100% !important;
        width: 3px !important;
        left: 0 !important;
        right: auto !important;
      }
    }

    /* Ocultar logo en dispositivos mÃ³viles */
    @media (max-width: 768px) {
      .header-logo {
        display: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo" class="header-logo">
    <div class="header-stats" id="headerStats">
      <div class="header-stat-card" id="headerTotalProducts">
        <div class="header-stat-number">0</div>
        <div class="header-stat-label">Productos</div>
      </div>
      <div class="header-stat-card" id="headerStockTeorico">
        <div class="header-stat-number">0</div>
        <div class="header-stat-label">Stock</div>
      </div>
      <div class="header-stat-card" id="headerStockTransito">
        <div class="header-stat-number">0</div>
        <div class="header-stat-label">TrÃ¡nsito</div>
      </div>
    </div>
    <span id="versionBtn" class="version-btn">v0.70</span>
  </header>

  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" id="mobileMenuBtn">
    <i class="material-icons">menu</i>
  </button>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
      <h3>Menu</h3>
      <button class="mobile-menu-close" id="mobileMenuClose">
        <i class="material-icons">close</i>
      </button>
    </div>
    <div class="mobile-menu-content" id="mobileMenuContent">
      <!-- Content will be cloned from toolbar -->
    </div>
    <div class="mobile-menu-version">
      <button id="mobileVersionBtn">v0.70</button>
    </div>
  </div>

  <div class="container">
    <div class="mdc-tab-bar" role="tablist" id="tabs">
      <div class="mdc-tab-scroller">
        <div class="mdc-tab-scroller__scroll-area">
          <div class="mdc-tab-scroller__scroll-content">
            <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0" data-segment="all">
              <span class="mdc-tab__content">
                <span class="mdc-tab__text-label">All</span>
              </span>
              <span class="mdc-tab-indicator mdc-tab-indicator--active">
                <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
              </span>
              <span class="mdc-tab__ripple"></span>
            </button>
            <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" data-segment="iphone">
              <span class="mdc-tab__content">
                <span class="mdc-tab__text-label">iPhone</span>
              </span>
              <span class="mdc-tab-indicator">
                <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
              </span>
              <span class="mdc-tab__ripple"></span>
            </button>
            <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" data-segment="macbooks">
              <span class="mdc-tab__content">
                <span class="mdc-tab__text-label">MacBooks</span>
              </span>
              <span class="mdc-tab-indicator">
                <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
              </span>
              <span class="mdc-tab__ripple"></span>
            </button>
            <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" data-segment="samsung">
              <span class="mdc-tab__content">
                <span class="mdc-tab__text-label">Samsung</span>
              </span>
              <span class="mdc-tab-indicator">
                <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
              </span>
              <span class="mdc-tab__ripple"></span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="toolbar">
      <button class="mdc-button mdc-button--raised" id="exportBtn">
        <span class="mdc-button__ripple"></span>
        <i class="material-icons mdc-button__icon" aria-hidden="true">download</i>
        <span class="mdc-button__label">Export to Excel</span>
      </button>
      <button class="mdc-button mdc-button--outlined" id="filterBtn">
        <span class="mdc-button__ripple"></span>
        <i class="material-icons mdc-button__icon" aria-hidden="true">filter_list</i>
        <span class="mdc-button__label">Filter</span>
      </button>
      <div class="mdc-text-field mdc-text-field--outlined search-field">
        <input class="mdc-text-field__input" type="text" id="searchBox" name="product-search" aria-describedby="search-helper-text" autocomplete="one-time-code" autocorrect="off" autocapitalize="off" spellcheck="false">
        <div class="mdc-notched-outline">
          <div class="mdc-notched-outline__leading"></div>
          <div class="mdc-notched-outline__notch">
            <label for="searchBox" class="mdc-floating-label">Search model...</label>
          </div>
          <div class="mdc-notched-outline__trailing"></div>
        </div>
      </div>
      <div class="mdc-form-field">
        <div class="mdc-checkbox">
          <input type="checkbox" class="mdc-checkbox__native-control" id="autoToggle" checked>
          <div class="mdc-checkbox__background">
            <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
              <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
            </svg>
            <div class="mdc-checkbox__mixedmark"></div>
          </div>
          <div class="mdc-checkbox__ripple"></div>
        </div>
        <label for="autoToggle">Auto-refresh 90s</label>
      </div>

      <div class="mdc-form-field">
        <div class="mdc-checkbox">
          <input type="checkbox" class="mdc-checkbox__native-control" id="hideZeroValues">
          <div class="mdc-checkbox__background">
            <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
              <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
            </svg>
            <div class="mdc-checkbox__mixedmark"></div>
          </div>
          <div class="mdc-checkbox__ripple"></div>
        </div>
        <label for="hideZeroValues">Hide zero values</label>
      </div>
      <div class="mdc-form-field">
        <div class="mdc-checkbox">
          <input type="checkbox" class="mdc-checkbox__native-control" id="showAllProducts">
          <div class="mdc-checkbox__background">
            <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
              <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
            </svg>
            <div class="mdc-checkbox__mixedmark"></div>
          </div>
          <div class="mdc-checkbox__ripple"></div>
        </div>
        <label for="showAllProducts">Show all products (including zero stock)</label>
      </div>
      <span class="status" id="statusText"></span>
      <div style="flex: 1;"></div> <!-- Spacer -->
      <a href="login.html" class="mdc-button mdc-button--raised" style="text-decoration: none; background-color: #f44336;">
        <span class="mdc-button__ripple"></span>
        <i class="material-icons mdc-button__icon" aria-hidden="true">login</i>
        <span class="mdc-button__label">Login</span>
      </a>
    </div>

    <div id="columnFilterDropdown" class="hidden">
      <label><input type="checkbox" data-column="articulo" checked> ArtÃ­culo</label>
      <label><input type="checkbox" data-column="description" checked> DescripciÃ³n</label>
      <label><input type="checkbox" data-column="stock"> Stock</label>
      <label><input type="checkbox" data-column="disponible" checked> Disponible</label>
      <label><input type="checkbox" data-column="ordenVenta"> En Orden de Venta</label>
      <label><input type="checkbox" data-column="ordenCompra"> En Orden de Compra</label>
      <label><input type="checkbox" data-column="stockTeorico" checked> Stock</label>
      <label><input type="checkbox" data-column="teorico"> Stock</label>
      <label><input type="checkbox" data-column="transito"> TrÃ¡nsito</label>
    </div>

    <div id="errorBox" class="error hidden"></div>

    <div class="stats-container" id="statsContainer" style="display: none;"></div>

    <!-- Mobile KPIs -->
    <div class="mobile-kpis" id="mobileKpis">
      <div class="header-stat-card" id="mobileHeaderTotalProducts">
        <div class="header-stat-label">Productos</div>
        <div class="header-stat-number">0</div>
      </div>
      <div class="header-stat-card" id="mobileHeaderStockTeorico">
        <div class="header-stat-label">Stock</div>
        <div class="header-stat-number">0</div>
      </div>
      <div class="header-stat-card" id="mobileHeaderStockTransito">
        <div class="header-stat-label">TrÃ¡nsito</div>
        <div class="header-stat-number">0</div>
      </div>
    </div>

    <!-- Add to Cart button (top only) -->
    <div style="text-align: right; margin-bottom: 12px; display: none;" id="addToCartContainer">
      <button class="mdc-button mdc-button--raised" id="addToCartBtn" style="background-color: #f44336 !important;">
        <span class="mdc-button__ripple"></span>
        <i class="material-icons mdc-button__icon" aria-hidden="true">shopping_cart</i>
        <span class="mdc-button__label">Add to Cart</span>
      </button>
    </div>

    <div style="overflow: auto; max-height: 70vh; border: 1px solid #eee; border-radius: 6px; width: 100%;">
      <table>
        <thead></thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>

  <div id="loginModal" class="modal hidden">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h2>Login</h2>
      <input type="text" placeholder="Username">
      <input type="password" placeholder="Password">
      <button id="modalLoginBtn">Login</button>
    </div>
  </div>

  <!-- LOGISTICS Modal -->
  <div id="logisticsModal" class="modal hidden">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h2>ğŸšš Logistics</h2>

      <div class="logistics-content">
        <div class="logistics-section">
          <h4>ğŸ“¦ Preparing Order</h4>
          <div class="logistics-orders" id="preparingOrders">
            <p class="no-orders">No orders in preparation</p>
          </div>
        </div>

        <div class="logistics-section">
          <h4>ğŸ“‹ Inventory Management</h4>
          <div class="logistics-orders" id="inventoryOrders">
            <p class="no-orders">No orders in inventory</p>
          </div>
        </div>

        <div class="logistics-section">
          <h4>ğŸš› Delivery Routes</h4>
          <div class="logistics-orders" id="deliveryOrders">
            <p class="no-orders">No orders for delivery</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="changelogModal" class="modal hidden">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h2>Changelog - Historial de Versiones</h2>
      <div id="changelogContent">
        <div class="version-section">
          <h3>v0.70 - Actual</h3>
          <ul>
            <li>âœ… <strong>Fix AprobaciÃ³n de Ã“rdenes en MASTER:</strong> Corregido botÃ³n "Confirmar" en modal de nÃºmero de orden manual - ahora funciona correctamente sin romper el layout</li>
            <li>ğŸ”§ <strong>Mejoras de Estabilidad:</strong> FunciÃ³n confirmManualOrderNumber ahora usa window.loadOrders() para recargar correctamente despuÃ©s de aprobar</li>
          </ul>
        </div>
        <div class="version-section">
          <h3>v0.68</h3>
          <ul>
            <li>ğŸ¨ <strong>ParÃ©ntesis en Totales:</strong> Valores de totales ahora se muestran entre parÃ©ntesis (ej: Stock (2,361) en lugar de Stock 2,361)</li>
            <li>ğŸ“± <strong>Ã“rdenes Responsive:</strong> En MASTER tab, botones de Ã³rdenes ahora aparecen debajo del texto en mÃ³viles para mejor uso del espacio</li>
            <li>ğŸ”„ <strong>Auto-refresh Simplificado:</strong> Eliminado checkbox de auto-refresh UI - la funcionalidad sigue activa en segundo plano cada 90s</li>
            <li>ğŸ› <strong>Fix Error switchView:</strong> Corregido error "switchView is not defined" al cambiar entre tabs de marketplace</li>
            <li>ğŸ› <strong>Fix Error currentViewMode:</strong> Corregido error "currentViewMode is not defined" al navegar entre segmentos</li>
            <li>ğŸ·ï¸ <strong>Filtros de Segmentos:</strong> ACCESORIOS ahora solo muestra Apple 20W USB-C Power Adapter USA, PUREGEAR temporalmente vacÃ­o</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.67</h3>
          <ul>
            <li>âœ… <strong>Fix Filtros de Columnas:</strong> Checkboxes de filtro de columnas (ej: En Orden de Compra) ahora funcionan correctamente en marketplace</li>
            <li>ğŸ”¢ <strong>Formato de NÃºmeros:</strong> Todas las columnas numÃ©ricas (ordenCompra, disponible, stock, etc.) ahora muestran valores formateados correctamente</li>
            <li>ğŸ“Š <strong>Totales Completos:</strong> Fila de totales en marketplace ahora muestra sumas para todas las columnas numÃ©ricas, no solo stock y trÃ¡nsito</li>
            <li>âœ… <strong>Fix AprobaciÃ³n de Ã“rdenes:</strong> Corregido botÃ³n de aprobar en MASTER tab - ahora muestra modal para nÃºmero de orden manual al aprobar desde revisiÃ³n</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.66</h3>
          <ul>
            <li>ğŸ“Š <strong>Dos Filas de Tabs:</strong> Primera fila con segmentos marketplace (ALL, IPHONE, MACBOOKS, SAMSUNG, ACCESORIOS, PUREGEAR), segunda fila con tabs admin (PRECIOS, MASTER)</li>
            <li>ğŸ†• <strong>Nuevos Segmentos:</strong> Agregados tabs ACCESORIOS y PUREGEAR con filtros automÃ¡ticos por keywords</li>
            <li>â†”ï¸ <strong>Tabs con Scroll:</strong> Scroll horizontal en tabs para pantallas pequeÃ±as con scrollbar personalizada</li>
            <li>ğŸ“ <strong>AlineaciÃ³n de Totales:</strong> Columnas de totales alineadas correctamente con tÃ­tulos en listado de productos</li>
            <li>ğŸ“± <strong>Botones MÃ³viles:</strong> Botones de columnas mÃ³viles (+ArtÃ­culo, +Stock, +TrÃ¡nsito) ahora solo visibles en mÃ³viles</li>
            <li>ğŸ“‹ <strong>Detalle de Orden Mejorado:</strong> Tabla de items con anchos fijos, descripciÃ³n con word-break, modal mÃ¡s ancho (1000px)</li>
            <li>ğŸ”§ <strong>Fix BotÃ³n Copiar a Oppen:</strong> Agregado botÃ³n faltante en modal de detalle de orden para admins</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.65</h3>
          <ul>
            <li>ğŸ“ <strong>Changelog Actualizado:</strong> Fix de visualizaciÃ³n mostrando correctamente la versiÃ³n actual en el changelog</li>
            <li>âœ¨ <strong>SincronizaciÃ³n de VersiÃ³n:</strong> NÃºmero de versiÃ³n y changelog ahora totalmente sincronizados</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.64</h3>
          <ul>
            <li>âš™ï¸ <strong>MenÃº CONFIG:</strong> Nuevo botÃ³n CONFIG en menÃº con submenÃº desplegable (PROFILE, ADMISIONES, CLIENTES, VENDEDORES)</li>
            <li>ğŸ“‹ <strong>Fila de Totales:</strong> Nueva fila arriba del listado mostrando total de productos, cantidades en carrito, stock y trÃ¡nsito</li>
            <li>ğŸ”„ <strong>ActualizaciÃ³n DinÃ¡mica:</strong> Total de cantidades se actualiza en tiempo real al agregar productos al carrito</li>
            <li>ğŸ—‘ï¸ <strong>KPIs Simplificados:</strong> Eliminados 3 KPI grandes del header (ahora integrados en fila de totales)</li>
            <li>ğŸ”” <strong>Badge Notificaciones:</strong> NÃºmero de notificaciones movido hacia abajo de la campana para mejor visibilidad</li>
            <li>ğŸ“‘ <strong>Reorden Tabs:</strong> En Administration, ADMISIONES ahora es el primer tab seguido de CLIENTES y VENDEDORES</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.63</h3>
          <ul>
            <li>ğŸ”€ <strong>MigraciÃ³n PRECIOS/MASTER:</strong> Tabs movidos de Administration a Marketplace (solo admins)</li>
            <li>ğŸ‘ï¸ <strong>Vista de Grid:</strong> Fix completo de grid apareciendo debajo de tabla con clase .grid-hidden</li>
            <li>ğŸ¨ <strong>Estilos Mejorados:</strong> Botones de orden con colores y tamaÃ±os correctos</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.62</h3>
          <ul>
            <li>ğŸ“Š <strong>Sistema de Analytics de PÃ¡ginas:</strong> Tracking automÃ¡tico de visitas a todas las pÃ¡ginas (Marketplace, Carrito, Index, Ayuda, AdministraciÃ³n, EstadÃ­sticas)</li>
            <li>ğŸ“ˆ <strong>GrÃ¡fico de PÃ¡ginas MÃ¡s Visitadas:</strong> Nuevo grÃ¡fico de barras mostrando quÃ© pÃ¡ginas usan mÃ¡s los usuarios (acumulado desde octubre 2025)</li>
            <li>ğŸ’° <strong>KPIs de Ventas Mejorados:</strong> Renombrado "Revenue Total" a "Venta Total", "Costo Total" a "Costo de Venta"</li>
            <li>ğŸ’µ <strong>Ganancia Total:</strong> Nuevo KPI calculando automÃ¡ticamente Venta - Costo con color verde/rojo segÃºn positivo/negativo</li>
            <li>ğŸ’² <strong>CÃ¡lculo de Costos Real:</strong> Costo de Venta ahora toma el costoContable desde la API para cada producto vendido</li>
            <li>ğŸ“± <strong>EstadÃ­sticas de Dispositivos:</strong> Cambiado de "usuarios Ãºnicos" a "total de logins acumulados" por dispositivo</li>
            <li>ğŸŒ <strong>EstadÃ­sticas de Navegadores:</strong> Cambiado de "usuarios Ãºnicos" a "total de logins acumulados" por navegador</li>
            <li>ğŸ“Š <strong>GrÃ¡fico de Ã“rdenes por Estado:</strong> Cambiado de grÃ¡fico circular (pie) a grÃ¡fico de barras para mejor visualizaciÃ³n</li>
            <li>ğŸ—“ï¸ <strong>AÃ±o Actualizado:</strong> Corregido "desde octubre 2024" a "desde octubre 2025" en todos los grÃ¡ficos</li>
            <li>ğŸš« <strong>Filtro de Unknown:</strong> Dispositivos y navegadores "Unknown" ya no aparecen en las estadÃ­sticas</li>
            <li>ğŸ¯ <strong>BotÃ³n EstadÃ­sticas en MenÃº:</strong> Movido de Ayuda al menÃº principal entre ADMIN y AYUDA (solo visible para admins)</li>
            <li>ğŸ“ <strong>ReorganizaciÃ³n de EstadÃ­sticas:</strong> GrÃ¡fico de "PÃ¡ginas MÃ¡s Visitadas" movido al final de la pÃ¡gina</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.61</h3>
          <ul>
            <li>ğŸ“± <strong>Scroll Horizontal Tabla:</strong> Tabla con scroll horizontal para evitar superposiciÃ³n de columnas al activar todas las opciones</li>
            <li>ğŸ“ <strong>Columna DescripciÃ³n:</strong> Ancho reducido con max-width 200px y ellipsis para mejor visualizaciÃ³n en mÃ³vil</li>
            <li>ğŸ–¼ï¸ <strong>Vistas Grid/List:</strong> Fix renderizado de productos al cambiar entre Table, Grid, List y Large Grid View</li>
            <li>ğŸ”¢ <strong>Input Cantidad Compacto:</strong> Reducido a 30px de ancho con padding mÃ­nimo para ahorrar espacio</li>
            <li>ğŸ¨ <strong>Botones de Cantidad:</strong> BotÃ³n + en verde (#4CAF50) y botÃ³n - en rojo (#f44336) con hover effects</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.60</h3>
          <ul>
            <li>ğŸ“‹ <strong>Copiar a Oppen:</strong> Nuevo botÃ³n en detalles de orden para copiar productos en formato tabular</li>
            <li>ğŸ”¢ <strong>Formato Oppen:</strong> Exporta CODIGO, DESCRIPCION, CANTIDAD, UNI y PRECIO sin $ para pegar directo</li>
            <li>ğŸ“Š <strong>Columnas Configurables:</strong> Formato con espacios en blanco para completar en sistema Oppen</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.59</h3>
          <ul>
            <li>ğŸ”” <strong>Sistema de Notificaciones:</strong> Campanita en esquina superior izquierda con badge animado</li>
            <li>ğŸ‘‘ <strong>Notificaciones Admin:</strong> Solo administradores ven notificaciones de productos sin precio y usuarios pendientes</li>
            <li>âš ï¸ <strong>Productos Sin Precio:</strong> Alerta visual con borde naranja en tabla + notificaciÃ³n en campanita</li>
            <li>ğŸ‘¥ <strong>Usuarios Pendientes:</strong> NotificaciÃ³n automÃ¡tica para admins cuando hay usuarios esperando aprobaciÃ³n</li>
            <li>ğŸ”„ <strong>Auto-actualizaciÃ³n:</strong> Notificaciones se actualizan cada 30 segundos automÃ¡ticamente</li>
            <li>âœ… <strong>ValidaciÃ³n de Ã“rdenes:</strong> ConfirmaciÃ³n antes de crear orden con productos sin precio asignado</li>
            <li>ğŸ”— <strong>RedirecciÃ³n Inteligente:</strong> Click en notificaciÃ³n de usuarios pendientes abre Administration.html</li>
            <li>ğŸ¯ <strong>Scroll AutomÃ¡tico:</strong> Click en productos sin precio hace scroll al primer producto afectado</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.58</h3>
          <ul>
            <li>ğŸ–¼ï¸ <strong>Sistema de ImÃ¡genes:</strong> Mapeo automÃ¡tico de productos a imÃ¡genes mediante product-images.json con 13 imÃ¡genes de productos</li>
            <li>ğŸ“‹ <strong>Especificaciones TÃ©cnicas:</strong> Chips compactos con emojis (aÃ±o, procesador, almacenamiento) en modal y tarjetas</li>
            <li>ğŸ“± <strong>Adaptador USB-C:</strong> Imagen especÃ­fica agregada (242KB) con prioridad 20 en mapeo</li>
            <li>ğŸ¨ <strong>Vistas de Productos:</strong> 4 modos (Table, List, Grid 2 cols, Large Grid 3 cols) - Split/Masonry eliminados</li>
            <li>ğŸ“ <strong>List View Mejorado:</strong> Altura aumentada desktop (140px) y mÃ³vil (150px) con imagen 110x110px</li>
            <li>ğŸ”² <strong>Grid Columnas Fijas:</strong> Grid View = 2 columnas, Large Grid View = 3 columnas en desktop</li>
            <li>ğŸ“Š <strong>Product Specs JSON:</strong> Base de datos de especificaciones tÃ©cnicas para 30+ modelos (iPhone, MacBook, Samsung)</li>
            <li>âœ¨ <strong>Modal Compacto:</strong> Especificaciones tÃ©cnicas mostradas como badges debajo del nombre del producto</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.57</h3>
          <ul>
            <li>ğŸ“± <strong>Administration Responsive:</strong> Ã“rdenes Master optimizadas para mÃ³viles con layout en columna</li>
            <li>ğŸ”˜ <strong>Botones Reorganizados:</strong> Botones de acciÃ³n (PreparaciÃ³n, Cancelar, Editar) debajo del texto en mÃ³vil</li>
            <li>ğŸ“Š <strong>KPIs Ocultados MÃ³vil:</strong> Stats-grid (Total Ã“rdenes, Borrador, etc.) ocultos en pantallas pequeÃ±as</li>
            <li>ğŸ“ <strong>Input Cantidad Ajustado:</strong> Ancho aumentado de 40px a 50px para mejor visualizaciÃ³n</li>
            <li>âš–ï¸ <strong>Precio Centrado:</strong> Columna de precio cambiada de derecha a centro</li>
            <li>ğŸ”¢ <strong>Ordenamiento NumÃ©rico:</strong> CÃ³digos de clientes ordenan correctamente (1, 2, 3 en vez de 1, 10, 100)</li>
            <li>ğŸš« <strong>Filtro Vendedor Interno:</strong> Email santifn.axp@gmail.com excluido de estadÃ­sticas</li>
            <li>ğŸ› <strong>Fix Toggle Columnas:</strong> Botones +ArtÃ­culo, +Stock, +TrÃ¡nsito ahora funcionan en mÃ³vil</li>
            <li>ğŸ“‰ <strong>KPIs Header MÃ³vil:</strong> Productos/Stock/TrÃ¡nsito ocultos en marketplace mÃ³vil para mÃ¡s espacio</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.56</h3>
          <ul>
            <li>ğŸ“± <strong>DiseÃ±o Responsive:</strong> OptimizaciÃ³n completa para mÃ³viles Android e iPhone en todas las pÃ¡ginas</li>
            <li>ğŸ“ <strong>Media Queries:</strong> 2 breakpoints (768px tablets, 480px mÃ³viles) para mejor adaptaciÃ³n</li>
            <li>ğŸ”¤ <strong>TamaÃ±os de Fuente:</strong> Ajustados para legibilidad en pantallas pequeÃ±as con mÃ­nimo 16px en inputs (previene zoom iOS)</li>
            <li>ğŸ‘† <strong>Botones TÃ¡ctiles:</strong> TamaÃ±os aumentados para facilitar interacciÃ³n en dispositivos mÃ³viles</li>
            <li>ğŸ“Š <strong>Tablas Responsive:</strong> Columnas colapsables con botones toggle en marketplace mÃ³vil</li>
            <li>ğŸ” <strong>MenÃºs Optimizados:</strong> MenÃº hamburguesa y modales adaptados para pantallas tÃ¡ctiles</li>
            <li>ğŸ“§ <strong>Campo Email en Ayuda:</strong> Agregado campo de email obligatorio en formulario de soporte</li>
            <li>ğŸ“ˆ <strong>EstadÃ­sticas Filtradas:</strong> Email cristiansan@gmail.com excluido de mÃ©tricas y rankings (desarrollo)</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.55</h3>
          <ul>
            <li>ğŸ†• <strong>Nueva PÃ¡gina de Ayuda:</strong> Creada ayuda.html con formulario de soporte tÃ©cnico</li>
            <li>ğŸ“ <strong>Sistema de Tickets:</strong> Usuarios pueden reportar problemas con nombre, telÃ©fono, descripciÃ³n y foto adjunta</li>
            <li>ğŸ“¸ <strong>Subida de Fotos:</strong> Vista previa de imÃ¡genes antes de enviar, almacenadas en Firebase Storage</li>
            <li>ğŸ’¾ <strong>Guardado en Firebase:</strong> Tickets guardados en colecciÃ³n soporte_tickets con timestamp y status</li>
            <li>ğŸ¤– <strong>Chatbot Reubicado:</strong> Chatbot AI movido de marketplace.html a ayuda.html (solo visible para admins)</li>
            <li>ğŸ› <strong>Logs de Errores Reubicados:</strong> Visor de logs movido de Administration.html a ayuda.html (solo admins)</li>
            <li>ğŸ“Š <strong>Panel Admin en Ayuda:</strong> 3 botones para admins: Chatbot AI, EstadÃ­sticas y Logs de Errores</li>
            <li>ğŸ”’ <strong>Control de Acceso:</strong> Todos los componentes admin validados con Firebase auth (solo santifn@gmail.com y cristiansan@gmail.com)</li>
            <li>ğŸ—‘ï¸ <strong>Limpieza de CÃ³digo:</strong> Removido HTML, CSS y JS del chatbot de marketplace.html (~500 lÃ­neas)</li>
            <li>ğŸ“‹ <strong>MenÃº Reorganizado:</strong> BotÃ³n AYUDA movido al final del menÃº hamburguesa</li>
            <li>ğŸ” <strong>Reglas Firebase Actualizadas:</strong> Agregadas reglas para soporte_tickets (create para usuarios, read/update/delete para admins)</li>
            <li>ğŸ“‚ <strong>Storage Rules:</strong> Nueva carpeta /soporte/ en Storage con permisos para imÃ¡genes de tickets</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.54</h3>
          <ul>
            <li>ğŸ› <strong>Fix Error Precios Null:</strong> Solucionado error "Cannot read properties of null (reading 'toFixed')" en cart.html</li>
            <li>âœ… <strong>ValidaciÃ³n de Datos:</strong> Agregada validaciÃ³n para item.price e item.quantity antes de operaciones matemÃ¡ticas</li>
            <li>ğŸ”’ <strong>Valores Por Defecto:</strong> Usa 0 como valor por defecto cuando price o quantity son null/undefined/NaN</li>
            <li>ğŸ¯ <strong>MÃºltiples Funciones:</strong> Correcciones aplicadas a initCart(), updateItemPrice() y confirmOrder()</li>
            <li>ğŸ“Š <strong>CÃ¡lculos Seguros:</strong> Todos los cÃ¡lculos de subtotales y totales ahora manejan valores nulos correctamente</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.52.3</h3>
          <ul>
            <li>ğŸ’° <strong>EdiciÃ³n de Precios en Modal:</strong> Ahora puedes editar precios directamente en el modal de detalles de orden</li>
            <li>ğŸ‘¤ <strong>Cambio de Cliente en Modal:</strong> Nuevo botÃ³n "Cambiar Cliente" junto al nombre del cliente</li>
            <li>ğŸ”„ <strong>ActualizaciÃ³n AutomÃ¡tica:</strong> Subtotales y total se recalculan automÃ¡ticamente al cambiar precio o cantidad</li>
            <li>ğŸ“ <strong>Inputs Mejorados:</strong> Precio con step 0.01 para centavos, cantidad y precio con estilo consistente</li>
            <li>ğŸ’¾ <strong>Guardado Inteligente:</strong> BotÃ³n "Guardar Cambios" aparece cuando hay modificaciones en precio o cantidad</li>
            <li>ğŸ¯ <strong>Event Listeners:</strong> Ambos inputs (precio y cantidad) actualizan subtotal y total dinÃ¡micamente</li>
            <li>ğŸŒ <strong>Scope Fix:</strong> Cambiado isUserAdmin a window.isUserAdmin para acceso global</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.52.2</h3>
          <ul>
            <li>ğŸ”§ <strong>Fix Botones Master:</strong> Solucionado comportamiento errÃ¡tico de botones en panel Master</li>
            <li>âœï¸ <strong>Botones Siempre Visibles:</strong> BotÃ³n "Editar" y botones de cambio de estado ahora aparecen consistentemente</li>
            <li>ğŸ”„ <strong>Re-render AutomÃ¡tico:</strong> Ã“rdenes se re-renderizan automÃ¡ticamente cuando se confirma usuario admin</li>
            <li>â±ï¸ <strong>Timing Mejorado:</strong> Aumentado delay de tab Master de 100ms a 300ms para sincronizaciÃ³n</li>
            <li>ğŸ“ <strong>Logging de Tab:</strong> Logs muestran estado de isUserAdmin al cambiar a Master</li>
            <li>ğŸ¯ <strong>Race Condition Fix:</strong> Eliminada condiciÃ³n de carrera entre verificaciÃ³n admin y carga de Ã³rdenes</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.52.1</h3>
          <ul>
            <li>ğŸ› <strong>Fix EdiciÃ³n de Precios:</strong> Solucionado problema de ediciÃ³n de precios al editar Ã³rdenes desde Master</li>
            <li>ğŸ“ <strong>Logging Detallado:</strong> Agregados logs de consola para debugging de ediciÃ³n de precios</li>
            <li>âš¡ <strong>ActualizaciÃ³n DinÃ¡mica:</strong> Cambio de precios ahora actualiza totales sin recargar pÃ¡gina (mantiene contexto)</li>
            <li>ğŸ” <strong>Debug Info:</strong> Logs muestran estado de admin, valores de precio, y event listeners</li>
            <li>âœ… <strong>Mejor UX:</strong> ConfirmaciÃ³n visual inmediata al cambiar precios</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.52</h3>
          <ul>
            <li>âœï¸ <strong>EdiciÃ³n Completa desde Master:</strong> Editar Ã³rdenes existentes con cambio de cliente y precios</li>
            <li>ğŸ‘¤ <strong>PreservaciÃ³n de Cliente:</strong> Al editar orden, se carga automÃ¡ticamente el cliente asignado</li>
            <li>ğŸ’° <strong>EdiciÃ³n de Precios:</strong> Admins pueden modificar precios de items en Ã³rdenes editadas</li>
            <li>ğŸ”„ <strong>Auto-selecciÃ³n:</strong> Cliente se selecciona automÃ¡ticamente en dropdown al editar orden</li>
            <li>ğŸ’¾ <strong>ActualizaciÃ³n Inteligente:</strong> Confirmar actualiza la orden original en lugar de crear nueva</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.51</h3>
          <ul>
            <li>ğŸ¨ <strong>Panel Cliente Mejorado:</strong> Fondo oscuro con texto blanco para mejor visibilidad</li>
            <li>ğŸ”§ <strong>Fix Visibility:</strong> Solucionado problema de texto blanco sobre fondo blanco</li>
            <li>âœ¨ <strong>DiseÃ±o Consistente:</strong> Panel de cliente con estilo similar a otros componentes admin</li>
            <li>ğŸ‘ï¸ <strong>Contraste Mejorado:</strong> Color verde (#4CAF50) para tÃ­tulos con fondo oscuro (#2a2a33)</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.50</h3>
          <ul>
            <li>ğŸ’° <strong>EdiciÃ³n de Precios:</strong> Admins pueden editar precios de items en el carrito</li>
            <li>ğŸ‘¤ <strong>Cambio de Cliente:</strong> Admins pueden asignar una orden a cualquier cliente</li>
            <li>ğŸ”’ <strong>Solo Admins:</strong> Funcionalidad restringida a usuarios administradores</li>
            <li>ğŸ¨ <strong>Panel Verde de Cliente:</strong> Indicador visual del cliente seleccionado para la orden</li>
            <li>ğŸ”„ <strong>BotÃ³n Cambiar Cliente:</strong> Acceso rÃ¡pido para reasignar Ã³rdenes</li>
            <li>ğŸ“ <strong>Inputs NumÃ©ricos:</strong> Campos de precio con validaciÃ³n y formato decimal</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.49</h3>
          <ul>
            <li>ğŸ”§ <strong>Fix Guardado de Logs:</strong> Corregida lÃ³gica que causaba guardar 0 logs</li>
            <li>ğŸ”’ <strong>Permisos Firebase:</strong> Agregadas reglas de seguridad para permitir actualizaciÃ³n de logs por admins</li>
            <li>ğŸ“ <strong>Solo Logs Nuevos:</strong> Ahora guarda ÃšNICAMENTE logs sin fecha guardada (sin sobrescribir anteriores)</li>
            <li>ğŸ“‹ <strong>Filtro "Actuales":</strong> Renombrado de "Todos" a "Actuales (sin guardar)" - muestra solo logs nuevos pendientes</li>
            <li>ğŸ‘ï¸ <strong>Auto-Ocultar Logs Guardados:</strong> DespuÃ©s de guardar, automÃ¡ticamente filtra y muestra solo logs actuales</li>
            <li>ğŸ“… <strong>Acceso a Logs Guardados:</strong> Los logs guardados quedan archivados y accesibles por fecha en el filtro</li>
            <li>âš¡ <strong>Independiente del Filtro:</strong> El guardado ya no depende del filtro seleccionado</li>
            <li>âœ… <strong>Mensajes Mejorados:</strong> Alertas mÃ¡s claras indicando cuÃ¡ntos logs nuevos se guardarÃ¡n</li>
            <li>ğŸš« <strong>PrevenciÃ³n de Duplicados:</strong> Evita sobrescribir fechas de guardado anteriores</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.48</h3>
          <ul>
            <li>ğŸ“Š <strong>EstadÃ­sticas de Ventas Mejoradas:</strong> Nuevos grÃ¡ficos de ventas por mes (Ãºltimos 12 meses) y por aÃ±o</li>
            <li>ğŸ“± <strong>Tracking de Dispositivos:</strong> DetecciÃ³n automÃ¡tica de PC, Mac, iPhone, iPad, Android Phone/Tablet en cada login</li>
            <li>ğŸŒ <strong>Tracking de Navegadores:</strong> DetecciÃ³n automÃ¡tica de Chrome, Safari, Firefox, Edge, Opera con versiÃ³n</li>
            <li>ğŸ“ˆ <strong>GrÃ¡ficos Dispositivos/Browsers:</strong> VisualizaciÃ³n tipo doughnut con porcentajes en estadÃ­sticas</li>
            <li>ğŸ¨ <strong>Layout Top 10 Mejorado:</strong> Vendedores y Usuarios lado a lado (responsive en mÃ³vil)</li>
            <li>ğŸ’¾ <strong>Datos en Firebase:</strong> Campos lastDevice, lastOS, lastBrowser, lastBrowserVersion guardados automÃ¡ticamente</li>
            <li>ğŸ“Š <strong>AnÃ¡lisis de Audiencia:</strong> Identifica quÃ© dispositivos y navegadores prefieren tus usuarios</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.47</h3>
          <ul>
            <li>ğŸ”§ <strong>Fix crÃ­tico Timestamp:</strong> Reemplazado Timestamp.fromDate() por serverTimestamp() para evitar error "Can't find variable: Timestamp"</li>
            <li>âš¡ <strong>Mejora de confiabilidad:</strong> serverTimestamp() usa el reloj del servidor Firebase (mÃ¡s preciso y confiable)</li>
            <li>âœ… <strong>Compatibilidad universal:</strong> SoluciÃ³n que funciona en todos los navegadores sin importar carga de mÃ³dulos</li>
            <li>ğŸ’¾ <strong>Guardar Logs:</strong> Nuevo botÃ³n para guardar snapshot de logs actuales con fecha del dÃ­a</li>
            <li>ğŸ“… <strong>Filtro por fecha:</strong> Los logs guardados aparecen como opciones en el filtro con la fecha de guardado</li>
            <li>ğŸ¨ <strong>Mejora visual de logs:</strong> Fondo oscuro (#2a2a2a) con texto blanco para mejor legibilidad</li>
            <li>ğŸ“‹ <strong>Mejor contraste:</strong> Mensajes de consola y stack traces con fondo mÃ¡s oscuro para facilitar lectura</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.46</h3>
          <ul>
            <li>ğŸ› <strong>Sistema de Logging de Errores:</strong> Registro automÃ¡tico de todos los errores del sistema en Firebase</li>
            <li>ğŸ“‹ <strong>Captura de Consola:</strong> Guarda automÃ¡ticamente los Ãºltimos 50 mensajes de console.log, console.error y console.warn</li>
            <li>ğŸ‘€ <strong>Panel de AdministraciÃ³n:</strong> Nueva pestaÃ±a "Logs de Errores" en Administration para visualizar errores</li>
            <li>ğŸ“Š <strong>Detalles Completos:</strong> Cada log incluye mensaje, fecha/hora, usuario, URL, stack trace y mensajes de consola</li>
            <li>ğŸ” <strong>Filtrado por Tipo:</strong> Filtros para ver errores por categorÃ­a (confirmaciÃ³n de orden, verificaciÃ³n de usuario, etc.)</li>
            <li>ğŸ“¥ <strong>ExportaciÃ³n a Excel:</strong> Descarga todos los logs en formato Excel con un click</li>
            <li>âš¡ <strong>Captura AutomÃ¡tica:</strong> Intercepta errores globales, promesas rechazadas y errores no manejados</li>
            <li>ğŸ”§ <strong>Fix Timestamp:</strong> Corregido export de Timestamp en cart.html para prevenir error "Can't find variable"</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.45</h3>
          <ul>
            <li>ğŸ” <strong>Registro Google mejorado:</strong> Formulario obligatorio al registrarse con Google (nombre, empresa, paÃ­s, telÃ©fono)</li>
            <li>âœ… <strong>ValidaciÃ³n de usuarios:</strong> Sistema de verificaciÃ³n de aprobaciÃ³n antes de crear Ã³rdenes</li>
            <li>ğŸ›’ <strong>Manejo de errores mejorado:</strong> Mensajes detallados y especÃ­ficos segÃºn tipo de error (permisos, conexiÃ³n, Firebase)</li>
            <li>ğŸ“‹ <strong>Cliente correcto en Ã³rdenes:</strong> Muestra nombre del cliente real en lugar del admin que creÃ³ la orden</li>
            <li>ğŸ”§ <strong>Timestamps de Firestore:</strong> Uso correcto de Timestamp.fromDate() para fechas en Ã³rdenes</li>
            <li>ğŸ› <strong>ValidaciÃ³n campos null:</strong> PrevenciÃ³n de undefined en clienteCodigo y vendedorId</li>
            <li>ğŸ“Š <strong>PriorizaciÃ³n clienteNombre:</strong> Sistema prioriza nombre del cliente sobre emails en visualizaciÃ³n</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.44</h3>
          <ul>
            <li>ğŸ¤– <strong>Chatbot AI Beta:</strong> Asistente virtual inteligente con bÃºsqueda semÃ¡ntica de productos</li>
            <li>ğŸ¨ <strong>DiseÃ±o personalizado:</strong> Icono de robot con antenitas y etiqueta "AI"</li>
            <li>ğŸ”’ <strong>Acceso restringido:</strong> Disponible solo para usuarios autorizados (beta testing)</li>
            <li>ğŸ’¬ <strong>Modal interactivo:</strong> Panel flotante que no interrumpe la navegaciÃ³n</li>
            <li>ğŸ§  <strong>DetecciÃ³n de intenciones:</strong> Entiende consultas sobre stock, precios, recomendaciones y mÃ¡s</li>
            <li>ğŸ“Š <strong>Algoritmo de valor:</strong> Recomendaciones basadas en relaciÃ³n precio/calidad</li>
            <li>âš¡ <strong>Cache inteligente:</strong> Sistema de cachÃ© para optimizar rendimiento</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.43</h3>
          <ul>
            <li>ğŸ“¸ <strong>CÃ¡mara en vivo:</strong> Acceso directo a la cÃ¡mara con preview en tiempo real para captura de fotos</li>
            <li>ğŸ“Š <strong>EstadÃ­sticas mejoradas:</strong> Mapeo automÃ¡tico de emails a nombres de clientes (cortizjctech â†’ Trading Next Black USA)</li>
            <li>ğŸ“ˆ <strong>LoginCount funcional:</strong> Sistema de contador de logins implementado y actualizado</li>
            <li>ğŸ”’ <strong>Permisos Firebase:</strong> Reglas agregadas para colecciÃ³n blockedEmails</li>
            <li>âŒ <strong>BotÃ³n Cancelar:</strong> Agregado en panel de admisiones para ocultar usuarios sin modificar DB</li>
            <li>ğŸ§¹ <strong>Rankings optimizados:</strong> Eliminado ranking duplicado de clientes en estadÃ­sticas</li>
            <li>ğŸ‘¥ <strong>Filtros de usuarios:</strong> Usuarios no aprobados excluidos de rankings</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.42</h3>
          <ul>
            <li>ğŸ¢ <strong>Cliente Principal:</strong> Mejorar resoluciÃ³n de nombres de cliente principal</li>
            <li>ğŸ” <strong>CÃ³digos Base:</strong> Extraer cÃ³digo base de cÃ³digos de vendedor (ej: "407_xyz" â†’ "407")</li>
            <li>ğŸ› <strong>Logging Debug:</strong> Agregar logging detallado para debugging de clientes</li>
            <li>âœ… <strong>Display Correcto:</strong> Mostrar cliente principal correcto en lugar de email de vendedor</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.41</h3>
          <ul>
            <li>ğŸ“± <strong>Responsive Marketplace:</strong> OptimizaciÃ³n completa para mÃ³viles con KPIs verticales</li>
            <li>ğŸ”˜ <strong>Columnas colapsables:</strong> Botones toggle (+/-) para ArtÃ­culo, Stock y TrÃ¡nsito en mÃ³vil</li>
            <li>ğŸ“‘ <strong>Tabs optimizados:</strong> Tab ALL oculto en mÃ³vil, tabs restantes al 100% ancho</li>
            <li>âš™ï¸ <strong>Administration responsive:</strong> Botones verticales y columna ArtÃ­culo con toggle en mÃ³vil</li>
            <li>ğŸ‘¥ <strong>Admisiones mÃ³vil:</strong> Datos y filtros apilados verticalmente sin superposiciÃ³n</li>
            <li>ğŸ” <strong>Dropdown buscable:</strong> Selector de clientes con bÃºsqueda en tiempo real en Admisiones</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.40</h3>
          <ul>
            <li>ğŸ“¸ <strong>Foto en PreparaciÃ³n:</strong> Subir foto de la orden cuando estÃ¡ en estado de preparaciÃ³n</li>
            <li>âš–ï¸ <strong>Peso en PreparaciÃ³n:</strong> Agregar peso (kg) a Ã³rdenes en preparaciÃ³n</li>
            <li>ğŸ¯ <strong>Botones compactos:</strong> Interfaz optimizada con botones similares a Editar/Cancelar</li>
            <li>â˜ï¸ <strong>Storage Firebase:</strong> Fotos guardadas en carpeta preparacion/ de Firebase Storage</li>
            <li>ğŸ“Š <strong>Metadata completa:</strong> Tracking de quiÃ©n y cuÃ¡ndo actualizÃ³ foto/peso</li>
            <li>âœ… <strong>ValidaciÃ³n mejorada:</strong> ValidaciÃ³n de tipo de archivo (solo imÃ¡genes) y tamaÃ±o mÃ¡ximo (5MB)</li>
            <li>ğŸ”„ <strong>ActualizaciÃ³n en tiempo real:</strong> Botones muestran estado actual (âœ“ cuando ya hay foto/peso)</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.39</h3>
          <ul>
            <li>ğŸš« <strong>Ignorar y bloquear usuarios:</strong> BotÃ³n en admisiones para ignorar usuarios permanentemente</li>
            <li>ğŸ“§ <strong>Bloqueo de emails:</strong> Emails bloqueados almacenados en colecciÃ³n blockedEmails</li>
            <li>âœ‹ <strong>ValidaciÃ³n en registro:</strong> Emails bloqueados no pueden crear nuevas cuentas</li>
            <li>âš ï¸ <strong>ConfirmaciÃ³n requerida:</strong> DiÃ¡logo de confirmaciÃ³n antes de bloquear usuario</li>
            <li>ğŸ¨ <strong>UI mejorada:</strong> Botones de aprobar/ignorar alineados con mismo tamaÃ±o</li>
            <li>ğŸ”§ <strong>Fix selector clientes:</strong> Eliminados cÃ³digos duplicados (solo muestra clientes principales)</li>
            <li>ğŸ› <strong>Fix Storage CORS:</strong> Corregido storageBucket a firebasestorage.app + CORS configurado</li>
            <li>ğŸ“± <strong>WhatsApp mejorado:</strong> EnvÃ­o de PDFs con enlace clickeable al vendedor</li>
            <li>ğŸ”§ <strong>Manejo localhost:</strong> Descarga automÃ¡tica de PDFs en desarrollo local</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.38</h3>
          <ul>
            <li>ğŸš« <strong>Ignorar y bloquear usuarios:</strong> Sistema completo de bloqueo de emails</li>
            <li>ğŸ“§ <strong>ValidaciÃ³n de bloqueos:</strong> PrevenciÃ³n de registros con emails bloqueados</li>
            <li>ğŸ¨ <strong>UI mejorada:</strong> Botones alineados en admisiones</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.37</h3>
          <ul>
            <li>ğŸ“ <strong>Registro ampliado:</strong> Formulario con mÃ¡s campos (nombre, empresa, paÃ­s, celular)</li>
            <li>ğŸ‘¤ <strong>Datos completos:</strong> Captura informaciÃ³n completa del cliente al registrarse</li>
            <li>ğŸ’¾ <strong>Almacenamiento mejorado:</strong> Nuevos datos guardados en Firestore para aprobaciÃ³n</li>
            <li>âœ… <strong>ValidaciÃ³n completa:</strong> Todos los campos son obligatorios en el registro</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.36</h3>
          <ul>
            <li>ğŸ’µ <strong>Fix formato de precio:</strong> Cambio de "$US$" a "$" en PDFs y Ã³rdenes</li>
            <li>ğŸŒ <strong>Locale actualizado:</strong> Formato de nÃºmeros cambiado de 'es-AR' a 'en-US'</li>
            <li>âœ¨ <strong>Display mejorado:</strong> Precios ahora muestran "$ 14.50" en lugar de "$US$ 14.50"</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.35</h3>
          <ul>
            <li>â–â• <strong>Minimizar/Maximizar todas las columnas:</strong> Botones - y + en columna Acciones</li>
            <li>ğŸ¯ <strong>Workflow optimizado:</strong> Minimizar todas y luego activar solo las columnas necesarias</li>
            <li>ğŸ’¾ <strong>Preferencias guardadas:</strong> Estado de columnas se mantiene entre sesiones</li>
            <li>âœ¨ <strong>UX mejorada:</strong> Control total sobre visibilidad de columnas</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.34</h3>
          <ul>
            <li>ğŸ› <strong>Fix ordenamiento CLIENTES:</strong> Corregido bug que impedÃ­a cambiar direcciÃ³n de ordenamiento</li>
            <li>âš¡ <strong>Event listeners optimizados:</strong> Configurados una sola vez para evitar duplicaciÃ³n</li>
            <li>âœ… <strong>Toggle funcional:</strong> Click en columnas ahora alterna correctamente entre asc/desc</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.33</h3>
          <ul>
            <li>ğŸ”€ <strong>Ordenamiento en tabla CLIENTES:</strong> Click en encabezados para ordenar ascendente/descendente</li>
            <li>â¬†ï¸â¬‡ï¸ <strong>Indicadores visuales:</strong> Flechas muestran direcciÃ³n del ordenamiento (â–² â–¼ â‡…)</li>
            <li>ğŸ¯ <strong>Todas las columnas ordenables:</strong> CÃ³digo, Nombre, Email, Vendedor, Lista, etc.</li>
            <li>âœ¨ <strong>UX mejorada:</strong> Hover en encabezados, columna activa resaltada en verde</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.32</h3>
          <ul>
            <li>ğŸ‘ï¸ <strong>Vista simplificada usuarios asignados:</strong> Usuarios asignados solo muestran email en tabla CLIENTES</li>
            <li>âœï¸ <strong>EdiciÃ³n completa:</strong> Modal de ediciÃ³n muestra todos los datos del usuario asignado</li>
            <li>ğŸ¯ <strong>UX mejorada:</strong> Evitar duplicaciÃ³n de datos del cliente principal en la tabla</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.31</h3>
          <ul>
            <li>ğŸ¨ <strong>Usuarios asignados destacados:</strong> Usuarios asignados a clientes se ven con fondo verde en tabla CLIENTES</li>
            <li>ğŸ“‹ <strong>Info completa en Ã³rdenes:</strong> Mostrar Cliente + CÃ³digo + Email en todas las vistas (SEGUIMIENTO, ADMIN, MASTER)</li>
            <li>ğŸ“„ <strong>PDFs actualizados:</strong> PDFs de Ã³rdenes incluyen cÃ³digo del cliente principal</li>
            <li>ğŸ“± <strong>WhatsApp mejorado:</strong> Mensajes muestran cliente principal, cÃ³digo y email del usuario</li>
            <li>ğŸ”§ <strong>Campo clienteCodigo:</strong> Agregado a estructura de Ã³rdenes para trazabilidad</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.30</h3>
          <ul>
            <li>ğŸ·ï¸ <strong>Fix floating label:</strong> Label "Buscar cliente" desaparece al escribir en Administration.html</li>
            <li>âœ¨ <strong>UX mejorada:</strong> Campo de bÃºsqueda mÃ¡s intuitivo con label animado</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.29</h3>
          <ul>
            <li>ğŸš« <strong>SEGUIMIENTO oculto para admins:</strong> Admins no ven SEGUIMIENTO en menÃº (disponible en ADMIN/MASTER)</li>
            <li>ğŸ¯ <strong>UX mejorada:</strong> MenÃº mÃ¡s limpio para administradores</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.28</h3>
          <ul>
            <li>ğŸ“„ <strong>PDF en ediciÃ³n de Ã³rdenes:</strong> Enviar PDF al modificar Ã³rdenes desde ADMIN/MASTER</li>
            <li>ğŸ”„ <strong>Mecanismo estandarizado:</strong> Mismo sistema de PDF para crear y editar Ã³rdenes</li>
            <li>ğŸ“± <strong>WhatsApp con PDF:</strong> Vendedores reciben enlace al PDF al modificar Ã³rdenes</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.27</h3>
          <ul>
            <li>ğŸ“§ <strong>Email de bienvenida:</strong> Usuarios reciben email automÃ¡tico al ser aprobados</li>
            <li>ğŸ¨ <strong>Email personalizado:</strong> Incluye rol, cliente asignado y botÃ³n de acceso al marketplace</li>
            <li>ğŸ”’ <strong>Variables de entorno:</strong> Credenciales de email configuradas de forma segura</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.26</h3>
          <ul>
            <li>ğŸ‘¤ <strong>Nuevo rol Cliente:</strong> Agregado rol "Cliente" en gestiÃ³n de admisiones</li>
            <li>ğŸ”§ <strong>Fix dropdowns admisiones:</strong> Texto ahora visible en dropdowns (Rol, Lista, Cliente Asignado)</li>
            <li>ğŸ¨ <strong>UI profesional:</strong> Estilo gris claro para dropdowns en lugar de debug amarillo</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.25</h3>
          <ul>
            <li>ğŸ”’ <strong>Seguridad marketplace:</strong> Requiere autenticaciÃ³n para ver precios</li>
            <li>ğŸ“± <strong>Logo oculto en mÃ³vil:</strong> Logo South Traders oculto en dispositivos mÃ³viles</li>
            <li>â¬†ï¸ <strong>Control de estados de Ã³rdenes:</strong> Solo Ã³rdenes en RevisiÃ³n pueden retroceder de estado</li>
            <li>ğŸ‘¥ <strong>Admisiones mejoradas:</strong> Cliente obligatorio, sin rol Usuario, con selector de lista de precios</li>
            <li>ğŸ“‹ <strong>Clientes duplicados:</strong> Al aprobar usuario se crea registro en clientes con mismo cÃ³digo</li>
            <li>ğŸ¨ <strong>UI Admisiones:</strong> Labels descriptivos, mejor contraste, texto visible en selectores</li>
            <li>ğŸ“„ <strong>PDF en WhatsApp:</strong> Ã“rdenes se envÃ­an como PDF adjunto vÃ­a Firebase Storage</li>
            <li>ğŸ”§ <strong>CORS configurado:</strong> Firebase Storage permite acceso web a PDFs</li>
            <li>â³ <strong>Loading en Ã³rdenes:</strong> AnimaciÃ³n durante generaciÃ³n de PDF y envÃ­o WhatsApp</li>
            <li>ğŸ“Š <strong>Columnas marketplace:</strong> Nuevo orden: ArtÃ­culo, DescripciÃ³n, Cantidad, Precio, Stock, TrÃ¡nsito</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.24</h3>
          <ul>
            <li>ğŸ‘¥ <strong>Sistema de aprobaciÃ³n de usuarios:</strong> Nuevos usuarios requieren aprobaciÃ³n de admin</li>
            <li>ğŸ” <strong>SecciÃ³n ADMISIONES:</strong> Panel en Administration.html para aprobar usuarios y asignar roles</li>
            <li>ğŸ‘‘ <strong>Roles de usuario:</strong> Sistema de permisos (usuario, vendedor, admin)</li>
            <li>ğŸ“‹ <strong>Columna LISTA en clientes:</strong> AsignaciÃ³n de lista de precios (precios1-5) por cliente</li>
            <li>ğŸ“Š <strong>Historial mejorado:</strong> Admins ven todas las Ã³rdenes, usuarios solo las suyas</li>
            <li>ğŸ—‘ï¸ <strong>Banner admin en historial:</strong> Indicador visual cuando admin ve todas las Ã³rdenes</li>
            <li>ğŸ‘¤ <strong>Email de usuario en Ã³rdenes:</strong> Mostrado en historial para admins</li>
            <li>âœï¸ <strong>EdiciÃ³n de perfil para todos:</strong> Usuarios no-admin pueden actualizar su nombre y datos</li>
            <li>ğŸ”§ <strong>Reglas Firestore actualizadas:</strong> Permisos correctos para ediciÃ³n de perfil propio</li>
            <li>ğŸ—‘ï¸ <strong>Herramienta de limpieza:</strong> delete-all-orders.html para borrar pedidos en testing (solo local)</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.23</h3>
          <ul>
            <li>ğŸ“± <strong>WhatsApp multi-telÃ©fono:</strong> EnvÃ­o automÃ¡tico a ambos telÃ©fonos del vendedor (phone y phone2)</li>
            <li>ğŸ“ <strong>Segundo telÃ©fono para vendedores:</strong> Campo phone2 agregado en datos de vendedor</li>
            <li>ğŸ”„ <strong>WhatsApp en ediciÃ³n de Ã³rdenes:</strong> NotificaciÃ³n automÃ¡tica al modificar Ã³rdenes existentes</li>
            <li>ğŸ”§ <strong>Fix vendedorId:</strong> Se preserva el vendedor al editar Ã³rdenes para correcto envÃ­o de WhatsApp</li>
            <li>ğŸ—‘ï¸ <strong>Limpieza automÃ¡tica editingOrderId:</strong> Se limpia al agregar productos nuevos al carrito</li>
            <li>âš¡ <strong>ValidaciÃ³n de Ã³rdenes:</strong> Si la orden a editar no existe, se limpia automÃ¡ticamente y se crea una nueva</li>
            <li>ğŸ“ <strong>Logs detallados WhatsApp:</strong> Sistema de debugging completo para rastrear envÃ­os</li>
            <li>ğŸ” <strong>BÃºsqueda en MASTER:</strong> Buscar Ã³rdenes por nÃºmero, cliente o cÃ³digo con debounce (300ms)</li>
            <li>ğŸ“Š <strong>Contador de resultados:</strong> Muestra cantidad de Ã³rdenes filtradas vs total</li>
            <li>âŒ <strong>BotÃ³n limpiar bÃºsqueda:</strong> Resetea el filtro y muestra todas las Ã³rdenes</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.22</h3>
          <ul>
            <li>ğŸ“Š <strong>KPIs mejorados:</strong> Ocultar valores en cero para mejor visualizaciÃ³n</li>
            <li>ğŸ¨ <strong>Interfaz optimizada:</strong> Mejor presentaciÃ³n de mÃ©tricas</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.21</h3>
          <ul>
            <li>ğŸ›’ <strong>Cart.html mejorado:</strong> Cantidades editables directamente en el carrito</li>
            <li>âœï¸ <strong>Input numÃ©rico:</strong> Cambiar cantidades sin recargar pÃ¡gina</li>
            <li>âœ… <strong>ConfirmaciÃ³n directa:</strong> Confirmar orden desde cart.html sin ir a order.html</li>
            <li>ğŸ‰ <strong>Modal de Ã©xito:</strong> Mensaje elegante de orden confirmada con nÃºmero</li>
            <li>ğŸ“± <strong>WhatsApp integrado:</strong> NotificaciÃ³n automÃ¡tica al vendedor desde cart.html</li>
            <li>ğŸ”§ <strong>Firebase sincronizado:</strong> ConfiguraciÃ³n correcta entre marketplace y cart</li>
            <li>ğŸš« <strong>Permisos SEGUIMIENTO:</strong> Usuarios no-admin no pueden mover Ã³rdenes</li>
            <li>ğŸ‘ï¸ <strong>Solo visualizaciÃ³n:</strong> No-admin puede ver estados pero no modificarlos</li>
            <li>ğŸ”’ <strong>Botones ocultos:</strong> Cambio de estado y cancelaciÃ³n solo para admin</li>
            <li>ğŸ—‘ï¸ <strong>Historial protegido:</strong> BotÃ³n "Limpiar Historial" solo para admin</li>
            <li>âš ï¸ <strong>ValidaciÃ³n doble:</strong> FunciÃ³n moveOrder verifica permisos antes de ejecutar</li>
            <li>ğŸ¨ <strong>Estado visual:</strong> Muestra estado actual para usuarios no-admin</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.20</h3>
          <ul>
            <li>ğŸ“‹ <strong>MASTER completamente rediseÃ±ado:</strong> SecciÃ³n sincronizada con SEGUIMIENTO</li>
            <li>ğŸ¯ <strong>Misma estructura visual:</strong> 9 estados organizados en secciones (Borrador, RevisiÃ³n, Aprobada, etc.)</li>
            <li>ğŸ“Š <strong>10 KPIs actualizados:</strong> Total + cada estado individual con contadores en tiempo real</li>
            <li>ğŸ”„ <strong>BotÃ³n Actualizar reubicado:</strong> Posicionado arriba de los KPIs para acceso rÃ¡pido</li>
            <li>ğŸ—‘ï¸ <strong>FunciÃ³n Borrar Todas las Ã“rdenes:</strong> BotÃ³n rojo con doble confirmaciÃ³n de seguridad</li>
            <li>âš ï¸ <strong>ConfirmaciÃ³n obligatoria:</strong> Requiere escribir "BORRAR TODO" para evitar eliminaciones accidentales</li>
            <li>ğŸ“± <strong>NotificaciÃ³n WhatsApp automÃ¡tica:</strong> Cada orden confirmada se envÃ­a al vendedor asignado</li>
            <li>ğŸ‘¥ <strong>DetecciÃ³n de vendedor:</strong> Sistema busca el vendedor del cliente automÃ¡ticamente</li>
            <li>ğŸ’¬ <strong>Mensaje formateado:</strong> WhatsApp con detalles completos (productos, cantidades, precios, total)</li>
            <li>ğŸ¯ <strong>Santiago asignado a todos:</strong> 421 clientes actualizados con vendedor por defecto</li>
            <li>ğŸ”§ <strong>Bug fixes:</strong> Eliminada declaraciÃ³n duplicada de formatNumber</li>
            <li>ğŸ› <strong>Correcciones JavaScript:</strong> Funciones de importaciÃ³n/exportaciÃ³n de clientes ahora funcionan correctamente</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.19</h3>
          <ul>
            <li>ğŸ”’ <strong>Control de acceso mejorado en Administration:</strong> Usuarios no-admin pueden VER pero NO editar</li>
            <li>ğŸ“‹ <strong>Modo solo lectura:</strong> Campos deshabilitados para usuarios sin permisos admin</li>
            <li>ğŸš« <strong>Botones ocultos:</strong> "Agregar Orden" y "Guardar" no visibles para no-admin</li>
            <li>ğŸ” <strong>BÃºsqueda de clientes:</strong> Campo de bÃºsqueda con filtro en tiempo real por 9 campos</li>
            <li>âš¡ <strong>BÃºsqueda inteligente:</strong> Debounce de 300ms y bÃºsqueda instantÃ¡nea con Enter</li>
            <li>ğŸ‘¥ <strong>Columna Vendedor:</strong> AsignaciÃ³n de vendedores a clientes desde tabla</li>
            <li>ğŸ“Š <strong>Dropdown dinÃ¡mico:</strong> Selector de vendedor en cada fila de cliente</li>
            <li>ğŸ¯ <strong>Santiago por defecto:</strong> AsignaciÃ³n automÃ¡tica a clientes sin vendedor</li>
            <li>ğŸ’¾ <strong>ActualizaciÃ³n instantÃ¡nea:</strong> Cambios de vendedor guardados en tiempo real en Firebase</li>
            <li>âœ… <strong>ConfirmaciÃ³n de orden mejorada:</strong> Nuevo mensaje personalizado de orden enviada</li>
            <li>ğŸ”§ <strong>Bug fix:</strong> FunciÃ³n updateButtonLabels faltante agregada en order.html</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.18</h3>
          <ul>
            <li>ğŸ‘¥ <strong>MÃ³dulo CLIENTES completo:</strong> GestiÃ³n completa de clientes con 14 campos en Administration</li>
            <li>â• <strong>Agregar/Editar clientes:</strong> Formulario completo para crear y modificar clientes</li>
            <li>ğŸ“¥ <strong>Importar desde Excel:</strong> Carga masiva de clientes desde archivos .xls/.xlsx</li>
            <li>ğŸ“¤ <strong>Exportar a Excel:</strong> Descarga del listado completo de clientes</li>
            <li>ğŸ—‘ï¸ <strong>Eliminar clientes:</strong> OpciÃ³n para borrar clientes con confirmaciÃ³n</li>
            <li>ğŸ’¾ <strong>IntegraciÃ³n Firebase:</strong> Todos los datos guardados en Firestore</li>
            <li>ğŸ“‹ <strong>Seguimiento de Pedidos:</strong> LOGISTICS renombrado a SEGUIMIENTO con 9 estados</li>
            <li>ğŸ”„ <strong>Flujo completo:</strong> Borrador â†’ En revisiÃ³n â†’ Aprobada â†’ En preparaciÃ³n â†’ Listo para retiro/Despacho â†’ Despachada â†’ Entregada â†’ Cerrada â†’ Cancelada</li>
            <li>ğŸ¯ <strong>MenÃº optimizado:</strong> CLIENTES movido a Administration, CONFIG y STATS removidos del menÃº marketplace</li>
            <li>ğŸ“± <strong>Historial compacto:</strong> Ã“rdenes minimizadas y modal responsive</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.16</h3>
          <ul>
            <li>ğŸ“¸ <strong>Sistema de ConfirmaciÃ³n FotogrÃ¡fica de Entregas</strong></li>
            <li>ğŸšš <strong>Logistics mejorado:</strong> Nombres actualizados a "Pedido en Preparacion", "Pedido en Camino", "Pedido Entregado"</li>
            <li>ğŸ“± <strong>Captura de fotos:</strong> OpciÃ³n para tomar foto desde cÃ¡mara o seleccionar archivo</li>
            <li>â˜ï¸ <strong>Almacenamiento inteligente:</strong> Fotos guardadas directamente en Firestore (evita problemas CORS)</li>
            <li>ğŸ—œï¸ <strong>CompresiÃ³n automÃ¡tica:</strong> ImÃ¡genes optimizadas para reducir espacio de almacenamiento</li>
            <li>ğŸ‘ï¸ <strong>VisualizaciÃ³n de fotos:</strong> Modal para ver fotos de entrega con informaciÃ³n detallada</li>
            <li>âœ… <strong>Flujo obligatorio:</strong> Foto requerida antes de marcar pedido como entregado</li>
            <li>ğŸ¨ <strong>Interfaz optimizada:</strong> Botones de foto compactos que no interfieren con el texto</li>
            <li>ğŸ“Š <strong>MÃºltiples pedidos:</strong> VisualizaciÃ³n correcta de todos los pedidos entregados</li>
            <li>ğŸ”§ <strong>Compatible localhost:</strong> Sistema diseÃ±ado para funcionar en desarrollo local</li>
            <li>ğŸ‘¤ <strong>PROFILE como primera opciÃ³n de menÃº</strong></li>
            <li>ğŸ¨ <strong>ADMIN con colores estÃ¡ndar del menÃº</strong></li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.15</h3>
          <ul>
            <li>âš™ï¸ <strong>PÃ¡gina de AdministraciÃ³n completamente funcional</strong></li>
            <li>ğŸ’° <strong>GestiÃ³n de Precios:</strong> Listado completo de productos con 4 precios editables</li>
            <li>ğŸ“¤ <strong>Importar Precios:</strong> Soporte para archivos CSV y Excel (.xlsx/.xls)</li>
            <li>ğŸ“¥ <strong>Exportar Precios:</strong> Descarga en formato CSV y Excel con formato profesional</li>
            <li>ğŸ’¾ <strong>Guardado AutomÃ¡tico:</strong> Los precios se guardan en Firebase instantÃ¡neamente</li>
            <li>ğŸ“‹ <strong>GestiÃ³n de Ã“rdenes Master:</strong> Sistema completo de seguimiento de Ã³rdenes</li>
            <li>ğŸ”„ <strong>Estados de Orden:</strong> A Confirmar â†’ En PreparaciÃ³n â†’ En Camino â†’ Entregado</li>
            <li>ğŸ‘¥ <strong>GestiÃ³n de Vendedores:</strong> Sistema completo de alta, ediciÃ³n y eliminaciÃ³n</li>
            <li>ğŸ¢ <strong>GestiÃ³n de Clientes:</strong> AdministraciÃ³n de clientes con asignaciÃ³n de vendedores</li>
            <li>ğŸ¨ <strong>Animaciones de Carga:</strong> Spinners elegantes durante procesos largos</li>
            <li>ğŸ”„ <strong>Auto-carga Inteligente:</strong> Datos se cargan automÃ¡ticamente al cambiar pestaÃ±as</li>
            <li>ğŸ“Š <strong>EstadÃ­sticas en Tiempo Real:</strong> Contadores automÃ¡ticos por cada secciÃ³n</li>
            <li>ğŸ›¡ï¸ <strong>Manejo Robusto de Errores:</strong> Validaciones y recuperaciÃ³n automÃ¡tica</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.13</h3>
          <ul>
            <li>ğŸ” <strong>BotÃ³n logout movido al menÃº hamburger</strong></li>
            <li>ğŸ”½ Logout y versiÃ³n reubicados al fondo del menÃº hamburger</li>
            <li>ğŸ“œ NÃºmero de versiÃ³n ahora abre el modal de changelog al hacer clic</li>
            <li>ğŸ§¹ Removido texto "Totals" de la fila de totales en listado</li>
            <li>ğŸ¨ Mejorado diseÃ±o del footer del menÃº con separador visual</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.12</h3>
          <ul>
            <li>ğŸ” <strong>Filtro de productos con stock 0 corregido</strong></li>
            <li>âœ… Agregado checkbox "Hide zero values" en barra superior</li>
            <li>ğŸ“‹ Mostrar todos los productos por defecto (incluyendo stock 0)</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.11</h3>
          <ul>
            <li>ğŸ›’ <strong>Sistema de confirmaciÃ³n de Ã³rdenes implementado</strong></li>
            <li>ğŸ“§ Eliminados botones de envÃ­o por WhatsApp y Email</li>
            <li>âœ… Nuevo botÃ³n Ãºnico "Confirmar Orden" con numeraciÃ³n automÃ¡tica</li>
            <li>ğŸ”¢ NumeraciÃ³n de Ã³rdenes comenzando desde #10000, #10001, etc.</li>
            <li>ğŸ“‹ Historial mejorado con nÃºmeros de orden y informaciÃ³n del usuario</li>
            <li>ğŸ‘¤ VisualizaciÃ³n de quiÃ©n realizÃ³ cada orden en el historial</li>
            <li>ğŸ”§ Campo de cantidad editable manualmente en marketplace</li>
            <li>âŒ¨ï¸ Input numÃ©rico para ingresar cantidades altas (50, 100, etc.)</li>
            <li>ğŸ”„ Compatibilidad mejorada entre Firebase v10 modular y compat SDK</li>
            <li>ğŸ—‘ï¸ Funciones de limpiar y exportar historial completamente implementadas</li>
            <li>ğŸ“Š ExportaciÃ³n a CSV con datos completos de Ã³rdenes</li>
            <li>ğŸ›¡ï¸ Manejo de errores robusto para evitar bloqueos de interfaz</li>
            <li>ğŸ¯ Flujo simplificado: confirmar â†’ nÃºmero Ãºnico â†’ historial â†’ redirect</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.10 - Sistema de Permisos</h3>
          <ul>
            <li>ğŸ” <strong>Sistema de permisos de usuario implementado</strong></li>
            <li>ğŸ‘¤ VerificaciÃ³n automÃ¡tica de permisos admin basada en Firebase</li>
            <li>ğŸš« Usuarios no-admin: acceso restringido a filtros de columnas</li>
            <li>âœ… Usuarios no-admin: acceso permitido a HISTORIAL y LOGISTICS</li>
            <li>ğŸ¯ Sistema consistente entre index.html, marketplace.html y order.html</li>
            <li>ğŸ”§ BotÃ³n LOGISTICS agregado al menÃº de order.html</li>
            <li>ğŸšš Modal de logistics completo con 3 secciones funcionales</li>
            <li>ğŸ›¡ï¸ Manejo de errores con permisos restrictivos por seguridad</li>
            <li>ğŸ“‹ Logging detallado para debugging de permisos</li>
            <li>âš™ï¸ IntegraciÃ³n automÃ¡tica con onAuthStateChanged de Firebase</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.9 - Sistema DinÃ¡mico de Columnas</h3>
          <ul>
            <li>ğŸ“Š <strong>Sistema completo de columnas dinÃ¡micas implementado</strong></li>
            <li>ğŸ”§ Agregadas todas las columnas de la API (15 total) con filtrado</li>
            <li>ğŸ’¾ Persistencia de filtros seleccionados en localStorage</li>
            <li>ğŸ“ˆ KPIs dinÃ¡micos que se actualizan segÃºn columnas visibles</li>
            <li>ğŸ¯ ConfiguraciÃ³n especÃ­fica de columnas por pÃ¡gina (index vs marketplace)</li>
            <li>ğŸ“ Columna descripciÃ³n con ancho doble (30%)</li>
            <li>ğŸ·ï¸ Limpieza de etiquetas KPI (removido "SUMA" y "SUMA EN")</li>
            <li>ğŸš€ BotÃ³n Logistics agregado en marketplace (sin iconos)</li>
            <li>âš¡ OptimizaciÃ³n de compatibilidad JavaScript navegadores antiguos</li>
            <li>ğŸ”„ Sistema de mapeo robusto con fallbacks para datos API</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.8 - Menu Administrativo</h3>
          <ul>
            <li>ğŸ” <strong>Hamburger menu administrativo implementado</strong></li>
            <li>ğŸ” Sistema de permisos admin basado en Firestore</li>
            <li>âš™ï¸ Panel de configuraciÃ³n con WhatsApp y Email</li>
            <li>ğŸ’¾ Almacenamiento automÃ¡tico en Firebase de configuraciones</li>
            <li>ğŸ”” Sistema de notificaciones toast con animaciones</li>
            <li>ğŸ“± IntegraciÃ³n automÃ¡tica con formulario de pedidos</li>
            <li>ğŸ“ ConfiguraciÃ³n de contacto persistente entre sesiones</li>
            <li>ğŸšª FunciÃ³n Logout mejorada y funcional</li>
            <li>ğŸ“‹ Auto-relleno de datos de contacto en order.html</li>
            <li>âœ¨ Interfaz de configuraciÃ³n intuitiva y responsive</li>
            <li>ğŸ› ï¸ Debug mejorado y manejo de errores Firebase</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.7 - Sistema de Pagos Crypto</h3>
          <ul>
            <li>ğŸ’° <strong>Sistema de pago crypto implementado</strong></li>
            <li>ğŸ”— Agregado QR code con address USDT (BSC) para pagos</li>
            <li>ğŸ“ Campo para hash de transacciÃ³n con validaciÃ³n</li>
            <li>ğŸ“‹ FunciÃ³n de copia de address al clipboard</li>
            <li>ğŸ¯ ValidaciÃ³n automÃ¡tica de formato de hash (0x + 66 chars)</li>
            <li>âœ… ConfirmaciÃ³n y almacenamiento local de transacciones</li>
            <li>ğŸ›’ BotÃ³n "Seguir Comprando" para volver al marketplace</li>
            <li>ğŸ”„ Estados visuales dinÃ¡micos en botones de pago</li>
          </ul>
        </div>

        <div class="version-section">
          <h3>v0.6 - Marketplace Mejorado</h3>
          <ul>
            <li>ğŸšª BotÃ³n Logout funcional en marketplace</li>
            <li>ğŸ”´ Valores en 0 mostrados en color rojo</li>
            <li>ğŸ“Š KPIs integrados en marketplace (Total Productos, Stock, Transit)</li>
            <li>ğŸ¨ Botones Add to Cart dinÃ¡micos (blancoâ†’rojo con cantidad)</li>
            <li>0ï¸âƒ£ Quantity por defecto en 0 en lugar de 1</li>
            <li>ğŸ”§ LÃ³gica mejorada para actualizaciÃ³n visual de botones</li>
            <li>ğŸ¯ Estilos consistentes entre pÃ¡ginas</li>
          </ul>
        </div>
        
        <div class="version-section">
          <h3>v0.5</h3>
          <ul>
            <li>âœ… Eliminada columna "Stock TeÃ³rico"</li>
            <li>âœ… Reordenadas columnas: Disponible | En TrÃ¡nsito</li>
            <li>âœ… Agregado sistema de versiones con changelog</li>
            <li>ğŸ”§ OptimizaciÃ³n de la interfaz</li>
          </ul>
        </div>
        
        <div class="version-section">
          <h3>v0.4</h3>
          <ul>
            <li>ğŸ“Š Agregadas estadÃ­sticas en tiempo real</li>
            <li>ğŸ” Mejorado sistema de filtros por columnas</li>
            <li>ğŸ“± OptimizaciÃ³n responsive</li>
          </ul>
        </div>
        
        <div class="version-section">
          <h3>v0.3</h3>
          <ul>
            <li>ğŸ“¤ Funcionalidad de exportaciÃ³n a Excel</li>
            <li>ğŸ”„ Auto-refresh cada 90 segundos</li>
            <li>ğŸ¨ Mejorado tema oscuro</li>
          </ul>
        </div>
        
        <div class="version-section">
          <h3>v0.2</h3>
          <ul>
            <li>ğŸ” Sistema de autenticaciÃ³n</li>
            <li>ğŸ“‹ Tabs de categorÃ­as (All, iPhone, MacBooks, Samsung)</li>
            <li>ğŸ” BÃºsqueda por modelo</li>
          </ul>
        </div>
        
        <div class="version-section">
          <h3>v0.1</h3>
          <ul>
            <li>ğŸ‰ VersiÃ³n inicial</li>
            <li>ğŸ“Š Tabla bÃ¡sica de inventario</li>
            <li>ğŸŒ™ Interfaz con tema oscuro</li>
            <li>ğŸ“± DiseÃ±o responsive bÃ¡sico</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // === FIREBASE CONFIGURATION ===
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, query, orderBy, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyCqtKOA_gMEi5CfvZF6Q3o_cJ0h-dZj4Ns",
      authDomain: "carrito-138c3.firebaseapp.com",
      projectId: "carrito-138c3",
      storageBucket: "carrito-138c3.firebasestorage.app",
      messagingSenderId: "636994473430",
      appId: "1:636994473430:web:a7b4e5adaae6d1b0f2a5bd"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // === EXPOSAR FIREBASE EN WINDOW PARA COMPATIBILIDAD ===
    window.firebase = {
      app: () => app,
      auth: () => auth,
      firestore: () => db,
      firestoreHelpers: {
        doc, getDoc, setDoc, updateDoc, collection, query, orderBy, getDocs
      },
      authHelpers: {
        onAuthStateChanged, signOut
      }
    };

    // === USER PERMISSIONS CHECK ===
    async function checkUserPermissions(user) {
      try {
        console.log('ğŸ” Verificando permisos para usuario:', user.email);
        
        const userRef = doc(db, 'usuarios', user.uid);
        const userDoc = await getDoc(userRef);
        
        let isAdmin = false;
        if (userDoc.exists()) {
          const userData = userDoc.data();
          isAdmin = userData.admin === true;
          console.log('ğŸ‘¤ Usuario encontrado:', userData);
          console.log('ğŸ” Es admin:', isAdmin);
        } else {
          console.log('âš ï¸ Usuario no encontrado en Firestore, asumiendo no-admin');
        }
        
        // FunciÃ³n para aplicar visibilidad de controles
        const applyControlsVisibility = () => {
          const filterBtn = document.getElementById('filterBtn');
          const columnFilterDropdown = document.getElementById('columnFilterDropdown');
          
          console.log('ğŸ” Elementos encontrados:');
          console.log('- filterBtn:', !!filterBtn);
          console.log('- columnFilterDropdown:', !!columnFilterDropdown);
          
          if (!isAdmin) {
            console.log('ğŸš« Usuario NO-ADMIN: ocultando filtros');
            if (filterBtn) {
              filterBtn.style.display = 'none';
              console.log('âœ… BotÃ³n de filtro ocultado');
            }
            if (columnFilterDropdown) {
              columnFilterDropdown.style.display = 'none';
              console.log('âœ… Dropdown de filtros ocultado');
            }
          } else {
            console.log('âœ… Usuario ADMIN: mostrando todos los controles');
            if (filterBtn) {
              filterBtn.style.display = 'block';
              console.log('âœ… BotÃ³n de filtro visible');
            }
            if (columnFilterDropdown) {
              columnFilterDropdown.style.display = 'flex';
              console.log('âœ… Dropdown de filtros disponible');
            }
          }
        };
        
        // Aplicar inmediatamente
        applyControlsVisibility();
        
        // TambiÃ©n aplicar despuÃ©s de un pequeÃ±o delay para asegurar que el DOM estÃ© listo
        setTimeout(applyControlsVisibility, 500);
      } catch (error) {
        console.error('âŒ Error verificando permisos de usuario:', error);
        // Por seguridad, ocultar controles si hay error
        const filterBtn = document.getElementById('filterBtn');
        const columnFilterDropdown = document.getElementById('columnFilterDropdown');
        
        if (filterBtn) filterBtn.style.display = 'none';
        if (columnFilterDropdown) columnFilterDropdown.style.display = 'none';
        
        console.log('ğŸš« Error en verificaciÃ³n: ocultando controles por seguridad');
      }
    }

    // === AUTH STATE LISTENER ===
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        console.log('ğŸ‘¤ Usuario autenticado en index.html, verificando permisos...');
        await checkUserPermissions(user);

        // Track page visit
        try {
          const { addDoc, serverTimestamp } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
          await addDoc(collection(db, 'page_visits'), {
            page: 'index',
            pageName: 'Index (Listado PÃºblico)',
            userId: user.uid,
            userEmail: user.email,
            timestamp: serverTimestamp()
          });
          console.log('ğŸ“Š Page visit tracked: index');
        } catch (error) {
          console.error('Error tracking page visit:', error);
        }

        // Set global login flag for price display
        window.isUserLoggedIn = true;
        console.log('ğŸ’° Usuario logueado, cargando precios desde Firebase...');

        // Show Add to Cart button for logged in users
        const addToCartContainer = document.getElementById('addToCartContainer');
        if (addToCartContainer) addToCartContainer.style.display = 'block';

        // Load prices from Firebase
        if (window.loadPricesFromFirebase) {
          await window.loadPricesFromFirebase();
          console.log('âœ… Precios cargados desde Firebase');

          // Refresh the view to show prices
          if (window.renderRows) {
            window.renderRows();
            console.log('ğŸ”„ Vista actualizada con columna de precios');
          }
        } else {
          console.log('âš ï¸ loadPricesFromFirebase no disponible aÃºn');
        }
      } else {
        console.log('ğŸ‘¤ Usuario no autenticado - pÃ¡gina accesible sin login');
        // No redirigir automÃ¡ticamente - permitir acceso sin autenticaciÃ³n
        // Los usuarios pueden usar el botÃ³n Login si desean autenticarse

        // Reset login flag
        window.isUserLoggedIn = false;

        // Hide Add to Cart button for non-authenticated users
        const addToCartContainer = document.getElementById('addToCartContainer');
        if (addToCartContainer) addToCartContainer.style.display = 'none';

        // Ocultar controles administrativos para usuarios no autenticados
        const filterBtn = document.getElementById('filterBtn');
        const columnFilterDropdown = document.getElementById('columnFilterDropdown');

        if (filterBtn) {
          filterBtn.style.display = 'none';
          console.log('âœ… Filtros ocultados para usuario no autenticado');
        }
        if (columnFilterDropdown) {
          columnFilterDropdown.style.display = 'none';
          columnFilterDropdown.classList.add('hidden');
        }
      }
    });

    console.log('âœ… Firebase inicializado en index.html');

    // === LOGISTICS FUNCTIONALITY ===

    // Load logistics orders from Firebase
    async function loadLogisticsOrders() {
      if (!firebase || !firebase.auth().currentUser) {
        console.log('âš ï¸ No user authenticated for logistics');
        return;
      }

      try {
        const { collection, query, orderBy, getDocs, updateDoc, doc } = firebase.firestoreHelpers;
        const db = firebase.firestore();

        const pedidosCollection = collection(db, 'pedidos');
        const q = query(pedidosCollection, orderBy('timestamp', 'desc'));
        const querySnapshot = await getDocs(q);

        const orders = [];
        const updatePromises = [];

        querySnapshot.forEach(docSnapshot => {
          const data = docSnapshot.data();

          // Check if logisticsState exists, if not, set it to 'preparing'
          if (!data.logisticsState) {
            console.log(`ğŸ”„ Setting logisticsState to 'preparing' for order ${docSnapshot.id}`);
            const orderRef = doc(db, 'pedidos', docSnapshot.id);
            updatePromises.push(updateDoc(orderRef, { logisticsState: 'preparing' }));
          }

          orders.push({
            id: docSnapshot.id,
            ...data,
            logisticsState: data.logisticsState || 'preparing' // Default state
          });
        });

        // Update orders that don't have logisticsState
        if (updatePromises.length > 0) {
          await Promise.all(updatePromises);
          console.log(`âœ… Updated ${updatePromises.length} orders with logisticsState`);
        }

        console.log('ğŸ“¦ Loaded', orders.length, 'logistics orders');
        displayLogisticsOrders(orders);

      } catch (error) {
        console.error('âŒ Error loading logistics orders:', error);
      }
    }

    // Display orders in their respective sections
    function displayLogisticsOrders(orders) {
      const preparingContainer = document.getElementById('preparingOrders');
      const inventoryContainer = document.getElementById('inventoryOrders');
      const deliveryContainer = document.getElementById('deliveryOrders');

      if (!preparingContainer || !inventoryContainer || !deliveryContainer) {
        console.warn('âš ï¸ Logistics containers not found');
        return;
      }

      // Separate orders by state
      const preparingOrders = orders.filter(order => order.logisticsState === 'preparing');
      const inventoryOrders = orders.filter(order => order.logisticsState === 'inventory');
      const deliveryOrders = orders.filter(order => order.logisticsState === 'delivery');

      // Display preparing orders
      if (preparingOrders.length > 0) {
        preparingContainer.innerHTML = preparingOrders.map(order => createOrderHTML(order, 'inventory')).join('');
      } else {
        preparingContainer.innerHTML = '<p class="no-orders">No orders in preparation</p>';
      }

      // Display inventory orders
      if (inventoryOrders.length > 0) {
        inventoryContainer.innerHTML = inventoryOrders.map(order => createOrderHTML(order, 'delivery')).join('');
      } else {
        inventoryContainer.innerHTML = '<p class="no-orders">No orders in inventory</p>';
      }

      // Display delivery orders
      if (deliveryOrders.length > 0) {
        deliveryContainer.innerHTML = deliveryOrders.map(order => createOrderHTML(order, null)).join('');
      } else {
        deliveryContainer.innerHTML = '<p class="no-orders">No orders for delivery</p>';
      }
    }

    // Create HTML for an order item
    function createOrderHTML(order, nextState) {
      const canMove = nextState !== null;
      const buttonHtml = canMove ?
        `<button class="move-order-btn" onclick="moveOrder('${order.id}', '${nextState}')" title="Move to ${nextState}">â†“</button>` :
        `<button class="move-order-btn" disabled title="Final state">âœ“</button>`;

      return `
        <div class="order-item" data-order-id="${order.id}">
          <div class="order-info">
            <div class="order-number">#${order.numeroOrden || order.id.slice(-6)}</div>
            <div class="order-details">
              ${order.fechaLocal || 'No date'} â€¢ ${order.cantidadItems || order.items?.length || 0} items â€¢ $${formatNumber(order.total || 0)}
            </div>
          </div>
          ${buttonHtml}
        </div>
      `;
    }

    // Move order to next state
    async function moveOrder(orderId, nextState) {
      if (!firebase || !firebase.firestore) {
        console.error('âŒ Firebase not available');
        return;
      }

      try {
        const { doc, updateDoc } = firebase.firestoreHelpers;
        const db = firebase.firestore();

        const orderRef = doc(db, 'pedidos', orderId);
        await updateDoc(orderRef, {
          logisticsState: nextState,
          lastStateUpdate: new Date()
        });

        console.log(`âœ… Order ${orderId} moved to ${nextState}`);

        // Reload orders to reflect changes
        loadLogisticsOrders();

      } catch (error) {
        console.error('âŒ Error moving order:', error);
        alert('Error moving order. Please try again.');
      }
    }

    // Expose logistics functions globally
    window.loadLogisticsOrders = loadLogisticsOrders;
    window.moveOrder = moveOrder;

    console.log('âœ… Firebase inicializado en index.html');
  </script>
  
  <script src="https://unpkg.com/material-components-web@14.0.0/dist/material-components-web.min.js"></script>
  <script>
    // Limpiar consola al cargar la pÃ¡gina
    console.clear();
    console.log('ğŸš€ Index cargado - Consola limpiada');

    // Initialize Material Design Components
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize all buttons
      const buttons = document.querySelectorAll('.mdc-button');
      buttons.forEach(button => mdc.ripple.MDCRipple.attachTo(button));

      // Setup Add to Cart button
      const addToCartBtn = document.getElementById('addToCartBtn');

      function handleAddToCart() {
        // Check if selectedItems exists and has items
        if (!window.selectedItems || window.selectedItems.size === 0) {
          alert('Por favor selecciona al menos un producto con cantidad mayor a 0');
          return;
        }

        // Filter out items with quantity 0
        const itemsToAdd = [];
        window.selectedItems.forEach(({ product, quantity }, id) => {
          if (quantity > 0) {
            itemsToAdd.push({
              item: product.articulo,
              description: product.description,
              price: product.price,
              quantity
            });
          }
        });

        if (itemsToAdd.length === 0) {
          alert('Por favor selecciona al menos un producto con cantidad mayor a 0');
          return;
        }

        // Save cart to localStorage
        localStorage.setItem('cart', JSON.stringify(itemsToAdd));
        console.log('Cart saved with', itemsToAdd.length, 'items, redirecting to cart.html');

        // Redirect to cart page
        window.location.href = 'cart.html';
      }

      if (addToCartBtn) {
        addToCartBtn.addEventListener('click', handleAddToCart);
      }
      
      // Initialize checkboxes
      const checkboxes = document.querySelectorAll('.mdc-checkbox');
      checkboxes.forEach(checkbox => mdc.checkbox.MDCCheckbox.attachTo(checkbox));
      
      // Initialize text fields
      const textFields = document.querySelectorAll('.mdc-text-field');
      textFields.forEach(textField => mdc.textField.MDCTextField.attachTo(textField));
      
      // Initialize tab bar
      const tabBar = document.querySelector('.mdc-tab-bar');
      if (tabBar) {
        const mdcTabBar = mdc.tabBar.MDCTabBar.attachTo(tabBar);

        // Handle tab activation
        mdcTabBar.listen('MDCTabBar:activated', (event) => {
          const tab = tabBar.querySelectorAll('.mdc-tab')[event.detail.index];
          const segment = tab.getAttribute('data-segment');
          
          // Trigger the existing tab functionality
          if (window.handleTabClick) {
            window.handleTabClick(segment);
          }
        });
      }

      // Add observer for logistics modal
      const logisticsModal = document.getElementById('logisticsModal');
      if (logisticsModal) {
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
              const target = mutation.target;
              if (!target.classList.contains('hidden')) {
                console.log('ğŸ“¦ Logistics modal opened, loading orders...');
                setTimeout(() => {
                  if (window.loadLogisticsOrders) {
                    window.loadLogisticsOrders();
                  } else {
                    console.log('âš ï¸ loadLogisticsOrders not available yet, retrying...');
                    setTimeout(() => window.loadLogisticsOrders && window.loadLogisticsOrders(), 500);
                  }
                }, 100);
              }
            }
          });
        });

        observer.observe(logisticsModal, { attributes: true });
        console.log('âœ… Logistics modal observer added');
      }

      // Mobile Menu functionality
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
      const mobileMenuClose = document.getElementById('mobileMenuClose');
      const mobileMenuContent = document.getElementById('mobileMenuContent');
      const toolbar = document.querySelector('.toolbar');

      function openMobileMenu() {
        mobileMenu.classList.add('active');
        mobileMenuOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';

        // Clone toolbar content into mobile menu if not already done
        if (mobileMenuContent.children.length === 0 && toolbar) {
          const toolbarChildren = Array.from(toolbar.children);

          // 1. First add Login button (find the link to login.html)
          const loginLink = toolbarChildren.find(child => child.tagName === 'A' && child.href && child.href.includes('login.html'));
          if (loginLink) {
            const loginClone = loginLink.cloneNode(true);
            mobileMenuContent.appendChild(loginClone);
          }

          // 2. Add separator after login
          const separator1 = document.createElement('div');
          separator1.className = 'menu-separator';
          separator1.style.borderTop = '1px solid #2a2a2a';
          separator1.style.margin = '8px 0';
          mobileMenuContent.appendChild(separator1);

          // 3. Add tabs (All, iPhone, MacBooks, Samsung)
          const tabsContainer = document.getElementById('tabs');
          if (tabsContainer) {
            const tabs = tabsContainer.querySelectorAll('.mdc-tab');
            tabs.forEach(tab => {
              const tabBtn = document.createElement('button');
              tabBtn.className = 'mdc-button mdc-button--outlined';

              const ripple = document.createElement('span');
              ripple.className = 'mdc-button__ripple';

              const label = document.createElement('span');
              label.className = 'mdc-button__label';
              label.textContent = tab.querySelector('.mdc-tab__text-label').textContent;

              tabBtn.appendChild(ripple);
              tabBtn.appendChild(label);

              // Copy data-segment attribute
              const segment = tab.getAttribute('data-segment');
              tabBtn.setAttribute('data-segment', segment);

              // Add click event
              tabBtn.addEventListener('click', () => {
                // Trigger the tab click
                tab.click();
                closeMobileMenu();
              });

              // Mark active tab
              if (tab.classList.contains('mdc-tab--active')) {
                tabBtn.classList.add('mdc-button--raised');
                tabBtn.style.backgroundColor = '#4CAF50';
                tabBtn.style.color = '#ffffff';
              }

              mobileMenuContent.appendChild(tabBtn);
              mdc.ripple.MDCRipple.attachTo(tabBtn);
            });
          }

          // 4. Add separator after tabs
          const separator2 = document.createElement('div');
          separator2.className = 'menu-separator';
          separator2.style.borderTop = '1px solid #2a2a2a';
          separator2.style.margin = '8px 0';
          mobileMenuContent.appendChild(separator2);

          // 5. Add remaining toolbar items (except login which was already added)
          toolbarChildren.forEach(child => {
            // Skip login link as it's already added, and skip the spacer div
            if ((child.tagName === 'A' && child.href && child.href.includes('login.html')) ||
                (child.tagName === 'DIV' && child.style.flex === '1')) {
              return;
            }

            const clone = child.cloneNode(true);

            // Re-attach event listeners for cloned elements
            if (clone.id === 'exportBtn') {
              clone.addEventListener('click', () => {
                closeMobileMenu();
                document.getElementById('exportBtn').click();
              });
            } else if (clone.id === 'filterBtn') {
              clone.addEventListener('click', () => {
                closeMobileMenu();
                document.getElementById('filterBtn').click();
              });
            } else if (clone.querySelector('#searchBox')) {
              const searchInput = clone.querySelector('#searchBox');
              searchInput.addEventListener('input', (e) => {
                document.getElementById('searchBox').value = e.target.value;
                document.getElementById('searchBox').dispatchEvent(new Event('input'));
              });
            } else if (clone.querySelector('#autoToggle')) {
              const checkbox = clone.querySelector('#autoToggle');
              checkbox.addEventListener('change', (e) => {
                document.getElementById('autoToggle').checked = e.target.checked;
                document.getElementById('autoToggle').dispatchEvent(new Event('change'));
              });
            } else if (clone.querySelector('#hideZeroValues')) {
              const checkbox = clone.querySelector('#hideZeroValues');
              checkbox.addEventListener('change', (e) => {
                document.getElementById('hideZeroValues').checked = e.target.checked;
                document.getElementById('hideZeroValues').dispatchEvent(new Event('change'));
              });
            } else if (clone.querySelector('#showAllProducts')) {
              const checkbox = clone.querySelector('#showAllProducts');
              checkbox.addEventListener('change', (e) => {
                document.getElementById('showAllProducts').checked = e.target.checked;
                document.getElementById('showAllProducts').dispatchEvent(new Event('change'));
              });
            }

            mobileMenuContent.appendChild(clone);
          });

          // Re-initialize Material Design components in mobile menu
          const buttons = mobileMenuContent.querySelectorAll('.mdc-button');
          buttons.forEach(button => mdc.ripple.MDCRipple.attachTo(button));

          const checkboxes = mobileMenuContent.querySelectorAll('.mdc-checkbox');
          checkboxes.forEach(checkbox => mdc.checkbox.MDCCheckbox.attachTo(checkbox));

          const textFields = mobileMenuContent.querySelectorAll('.mdc-text-field');
          textFields.forEach(textField => mdc.textField.MDCTextField.attachTo(textField));
        }
      }

      function closeMobileMenu() {
        mobileMenu.classList.remove('active');
        mobileMenuOverlay.classList.remove('active');
        document.body.style.overflow = '';
      }

      if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', openMobileMenu);
      }

      if (mobileMenuClose) {
        mobileMenuClose.addEventListener('click', closeMobileMenu);
      }

      if (mobileMenuOverlay) {
        mobileMenuOverlay.addEventListener('click', closeMobileMenu);
      }

      // Mobile version button
      const mobileVersionBtn = document.getElementById('mobileVersionBtn');
      if (mobileVersionBtn) {
        mobileVersionBtn.addEventListener('click', () => {
          closeMobileMenu();
          // Trigger the main version button click
          document.getElementById('versionBtn').click();
        });
      }
    });
  </script>
  <script src="main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  
</body>
</html>